(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{sq1v:function(e,t,n){"use strict";(function(t){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=n("UxO+"),a=n("V2qZ"),i=r(n("17x9")),s=n("q1tI"),c=r(s),u=n("wLTh"),l=n("WCT8"),m=n("qKvR");function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},R=Object.prototype.toString;function O(e){return"[object Array]"===R.call(e)}function P(e){return void 0===e}function B(e){return null!==e&&"object"==typeof e}function j(e){return"[object Function]"===R.call(e)}function A(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),O(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var T={isArray:O,isArrayBuffer:function(e){return"[object ArrayBuffer]"===R.call(e)},isBuffer:function(e){return null!==e&&!P(e)&&null!==e.constructor&&!P(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:B,isUndefined:P,isDate:function(e){return"[object Date]"===R.call(e)},isFile:function(e){return"[object File]"===R.call(e)},isBlob:function(e){return"[object Blob]"===R.call(e)},isFunction:j,isStream:function(e){return B(e)&&j(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:A,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)A(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)A(arguments[r],n);return t},extend:function(e,t,n){return A(t,(function(t,r){e[r]=n&&"function"==typeof t?E(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function D(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(T.isURLSearchParams(t))r=t.toString();else{var o=[];T.forEach(t,(function(e,t){null!=e&&(T.isArray(e)?t+="[]":e=[e],T.forEach(e,(function(e){T.isDate(e)?e=e.toISOString():T.isObject(e)&&(e=JSON.stringify(e)),o.push(D(t)+"="+D(e))})))})),r=o.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function q(){this.handlers=[]}q.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},q.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},q.prototype.forEach=function(e){T.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var M=q,N=function(e,t,n){return T.forEach(n,(function(n){e=n(e,t)})),e},L=function(e){return!(!e||!e.__CANCEL__)},U=function(e,t){T.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},I=function(e,t,n,r,o){return function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,o)},F=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],z=T.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=T.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},W=T.isStandardBrowserEnv()?{write:function(e,t,n,r,o,a){var i=[];i.push(e+"="+encodeURIComponent(t)),T.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),T.isString(r)&&i.push("path="+r),T.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},H={"Content-Type":"application/x-www-form-urlencoded"};function V(e,t){!T.isUndefined(e)&&T.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var X,K={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(X=function(e){return new Promise((function(t,n){var r=e.data,o=e.headers;T.isFormData(r)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",s=e.auth.password||"";o.Authorization="Basic "+btoa(i+":"+s)}var c,u,l=(c=e.baseURL,u=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,u):u);if(a.open(e.method.toUpperCase(),_(l,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var r,o,i,s,c,u="getAllResponseHeaders"in a?(r=a.getAllResponseHeaders(),c={},r?(T.forEach(r.split("\n"),(function(e){if(s=e.indexOf(":"),o=T.trim(e.substr(0,s)).toLowerCase(),i=T.trim(e.substr(s+1)),o){if(c[o]&&F.indexOf(o)>=0)return;c[o]="set-cookie"===o?(c[o]?c[o]:[]).concat([i]):c[o]?c[o]+", "+i:i}})),c):c):null,l={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:u,config:e,request:a};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(I("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,l),a=null}},a.onabort=function(){a&&(n(I("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(I("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(I(t,e,"ECONNABORTED",a)),a=null},T.isStandardBrowserEnv()){var m=W,d=(e.withCredentials||z(l))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in a&&T.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)})),T.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),n(e),a=null)})),void 0===r&&(r=null),a.send(r)}))}),X),transformRequest:[function(e,t){return U(t,"Accept"),U(t,"Content-Type"),T.isFormData(e)||T.isArrayBuffer(e)||T.isBuffer(e)||T.isStream(e)||T.isFile(e)||T.isBlob(e)?e:T.isArrayBufferView(e)?e.buffer:T.isURLSearchParams(e)?(V(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):T.isObject(e)?(V(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};T.forEach(["delete","get","head"],(function(e){K.headers[e]={}})),T.forEach(["post","put","patch"],(function(e){K.headers[e]=T.merge(H)}));var $=K;function G(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var J=function(e){return G(e),e.headers=e.headers||{},e.data=N(e.data,e.headers,e.transformRequest),e.headers=T.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),T.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||$.adapter)(e).then((function(t){return G(e),t.data=N(t.data,t.headers,e.transformResponse),t}),(function(t){return L(t)||(G(e),t&&t.response&&(t.response.data=N(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Y=function(e,t){t=t||{};var n={},r=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];T.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),T.forEach(o,(function(r){T.isObject(t[r])?n[r]=T.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:T.isObject(e[r])?n[r]=T.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),T.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var i=r.concat(o).concat(a),s=Object.keys(t).filter((function(e){return-1===i.indexOf(e)}));return T.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function Z(e){this.defaults=e,this.interceptors={request:new M,response:new M}}Z.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Y(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[J,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Z.prototype.getUri=function(e){return e=Y(this.defaults,e),_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},T.forEach(["delete","get","head","options"],(function(e){Z.prototype[e]=function(t,n){return this.request(T.merge(n||{},{method:e,url:t}))}})),T.forEach(["post","put","patch"],(function(e){Z.prototype[e]=function(t,n,r){return this.request(T.merge(r||{},{method:e,url:t,data:n}))}}));var Q=Z;function ee(e){this.message=e}ee.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ee.prototype.__CANCEL__=!0;var te=ee;function ne(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new te(e),t(n.reason))}))}ne.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ne.source=function(){var e;return{token:new ne((function(t){e=t})),cancel:e}};var re=ne;function oe(e){var t=new Q(e),n=E(Q.prototype.request,t);return T.extend(n,Q.prototype,t),T.extend(n,t),n}var ae=oe($);ae.Axios=Q,ae.create=function(e){return oe(Y(ae.defaults,e))},ae.Cancel=te,ae.CancelToken=re,ae.isCancel=L,ae.all=function(e){return Promise.all(e)},ae.spread=function(e){return function(t){return e.apply(null,t)}};var ie=ae,se=ae;ie.default=se;var ce=ie,ue=function e(t,n,r,o,a,i,s){var c=this;d(this,e),this.serialize=function(){return{id:c.id,data:c.data,status:c.status,time:c.time,start:c.start,end:c.end,replies:c.replies}},this.id=t,this.data=n,this.status=r,this.time=o,this.start=a,this.end=i,this.replies=s},le=function e(t){var n=this;d(this,e),this.setComments=function(t){var n=t.map((function(e){return new ue(e.id,e.data,e.status,e.time,e.start,e.end,e.replies)}));return new e(n)},this.applyTransform=function(t){for(var r=[],o=t.mapping,a=0;a<n.comments.length;a+=1){var i=n.comments[a],s=o.map(i.start,1),c=o.map(i.end,-1);if(s!==c){var u=i.id,l=i.data,m=i.status,d=i.time,p=i.replies;r.push(new ue(u,l,m,d,s,c,p))}}return new e(r)},this.addComment=function(t,r,o,a){var i=o.$from,s=o.$to,c=new ue(t,y({},r),"OPEN",a,i.pos,s.pos),u=[].concat(function(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.comments),[c]);return new e(u,n.metadata)},this.addReply=function(e,t){var r=n.comments.find((function(t){return t.id===e}));return r.replies||(r.replies=[]),r.replies.push(t),n},this.updateReply=function(e,t){var r=n.comments.find((function(t){return t.id===e})).replies.find((function(e){return e.id===t.id}));return r.data.message=t.message,r.time=new Date,n},this.updateComment=function(e,t){var r=n.comments.find((function(t){return t.id===e}));return r.data=y(y({},r.data),t),n},this.resolveComment=function(e){return n.comments.find((function(t){return t.id===e})).status="RESOLVED",n},this.reopenComment=function(e){return n.comments.find((function(t){return t.id===e})).status="OPEN",n},this.deleteComment=function(e){return n.comments.find((function(t){return t.id===e})).status="DELETED",n},this.getVisibleComments=function(){return n.comments?n.comments.filter((function(e){return"DELETED"!==e.status})):[]},this.comments=t},me=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},de=function(e,t,n){if(!e)return{};var r=e.current.getBoundingClientRect(),o=t.getBoundingClientRect(),a=o.y+o.height-r.y-o.height/2-12;return n&&a+182>r.height&&(a=r.height-182),{right:4,top:a}},pe=function(e,t){for(var n=e.head,r=0;r<t.length;r+=1)if(t[r].start<=n&&t[r].end>=n)return t[r]},fe=new o.PluginKey("comment"),he=function(e){return new o.Plugin({key:fe,state:{init:function(){return{commentState:new le,metadata:e}},apply:function(e,t,n,r){if(e.getMeta("comment_license_missing"))return{license_missing:!0};if(t.license_missing)return t;var o=y({},t);e.docChanged&&(o.commentState=o.commentState.applyTransform(e));var a=e.getMeta("editor-focused");if(!0===a||!1===a)return o.editorFocus=a,o;var i=e.getMeta("set-comments");if(i)return o.commentState=o.commentState.setComments(i.comments),o;var s=e.getMeta("update-metadata");if(s)return o.metadata=s,o;var c=e.getMeta("update-comment");if(c){var u=c.id,l=c.data;return o.commentState=o.commentState.updateComment(u,l),o}var m=e.getMeta("delete-comment");if(m)return o.commentState=o.commentState.deleteComment(m),o;if(m=e.getMeta("resolve-comment"))return o.commentState=o.commentState.resolveComment(m),o;if(m=e.getMeta("reopen-comment"))return o.commentState=o.commentState.reopenComment(m),o;var d=e.getMeta("reply-comment");if(d){var p=d,f=p.commentId,h=p.message,g={id:me(),data:y({message:h},t.metadata)};return o.commentState=o.commentState.addReply(f,g),o}if(d=e.getMeta("update-reply")){var v=d,b=v.id,C=v.reply;return o.commentState=o.commentState.updateReply(b,C),o}var w=e.getMeta("add-comment");return w&&(o.commentState=o.commentState.addComment(me(),y(y({},w),t.metadata),r.selection,new Date(e.time))),o}}})},ge=new o.PluginKey("highlightComment"),ye=new o.Plugin({key:ge,state:{init:function(){return{deco:a.DecorationSet.empty,comment:null}},apply:function(e,t,n,r){if(e.getMeta("comment_license_missing"))return{license_missing:!0};if(t.license_missing)return t;var o=fe.getState(r).commentState;if(!o)return t;var i,s=o.getVisibleComments(),c=s.map((function(e){return"RESOLVED"===e.status?a.Decoration.inline(e.start,e.end,{class:"nib-comment-resolved-marker"}):a.Decoration.inline(e.start,e.end,{class:"nib-comment-marker"})}));return!1!==e.getMeta("editor-focused")&&(i=pe(r.selection,s))&&("RESOLVED"===i.status?c.push(a.Decoration.inline(i.start,i.end,{class:"nib-highlighted-resolved-comment-marker"})):c.push(a.Decoration.inline(i.start,i.end,{class:"nib-highlighted-comment-marker"}))),{deco:a.DecorationSet.create(r.doc,c),comment:i}}},props:{decorations:function(e){return this.getState(e).deco}}}),ve=new o.PluginKey("highlight"),be=new o.Plugin({key:ve,state:{init:function(){return{deco:a.DecorationSet.empty,hidePopups:!1}},apply:function(e,t,n,r){if(e.getMeta("comment_license_missing"))return{license_missing:!0};if(t.license_missing)return t;var o=t.hidePopups;if(!0===e.getMeta("hide-comment-popups"))return{deco:a.DecorationSet.empty,hidePopups:!0};if(!0===e.getMeta("editor-focused")&&(o=!1),!0===e.getMeta("editor-clicked")&&(o=!1),!o){var i=fe.getState(r).commentState;if(!i)return t;var s=i.getVisibleComments(),c=pe(r.selection,s),u=[];if(c){if(c===t.comment&&c.status===t.commentStatus)return t;"RESOLVED"===c.status?u.push(a.Decoration.inline(c.start,c.end,{class:"nib-comment-old-resolved-marker"})):u.push(a.Decoration.inline(c.start,c.end,{class:"nib-comment-old-marker"}))}else{var l=r.selection,m=l.$from,d=l.$to;u.push(a.Decoration.inline(m.pos,d.pos,{class:"nib-comment-add-marker"}))}return{deco:a.DecorationSet.create(r.doc,u),comment:c,commentStatus:c&&c.status,hidePopups:o}}return t}},props:{decorations:function(e){return this.getState(e).deco}}}),Ce=function(e){var t=e.pmview;(0,t.dispatch)(t.state.tr.setMeta("hide-comment-popups",!0))},we=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function xe(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Se=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ke=xe((function(e){return Se.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function Ee(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]):r+=n+" "})),r}var Re=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert("."+r,o,e.sheet,!0),o=o.next}while(void 0!==o)}},Oe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pe=/[A-Z]|^ms/g,Be=/_EMO_([^_]+?)_([^]*?)_EMO_/g,je=function(e){return 45===e.charCodeAt(1)},Ae=function(e){return null!=e&&"boolean"!=typeof e},Te=xe((function(e){return je(e)?e:e.replace(Pe,"-$&").toLowerCase()})),De=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Be,(function(e,t,n){return qe={name:t,styles:n,next:qe},t}))}return 1===Oe[e]||je(e)||"number"!=typeof t||0===t?t:t+"px"};function _e(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return qe={name:n.name,styles:n.styles,next:qe},n.name;if(void 0!==n.styles){var o=n.next;if(void 0!==o)for(;void 0!==o;)qe={name:o.name,styles:o.styles,next:qe},o=o.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=_e(e,t,n[o],!1);else for(var a in n){var i=n[a];if("object"!=typeof i)null!=t&&void 0!==t[i]?r+=a+"{"+t[i]+"}":Ae(i)&&(r+=Te(a)+":"+De(a,i)+";");else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var s=_e(e,t,i,!1);switch(a){case"animation":case"animationName":r+=Te(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var c=0;c<i.length;c++)Ae(i[c])&&(r+=Te(a)+":"+De(a,i[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=qe,i=n(e);return qe=a,_e(e,t,i,r)}break;case"string":}if(null==t)return n;var s=t[n];return void 0===s||r?n:s}var qe,Me=/label:\s*([^\s;\n{]+)\s*;/g,Ne=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";qe=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,o+=_e(n,t,a,!1)):o+=a[0];for(var i=1;i<e.length;i++)o+=_e(n,t,e[i],46===o.charCodeAt(o.length-1)),r&&(o+=a[i]);Me.lastIndex=0;for(var s,c="";null!==(s=Me.exec(o));)c+="-"+s[1];return{name:function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+c,styles:o,next:qe}},Le=ke,Ue=function(e){return"theme"!==e&&"innerRef"!==e},Ie=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Le:Ue};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(n,!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function e(t,n){var r,o,a;void 0!==n&&(r=n.label,a=n.target,o=t.__emotion_forwardProp&&n.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&n.shouldForwardProp(e)}:n.shouldForwardProp);var i=t.__emotion_real===t,c=i&&t.__emotion_base||t;"function"!=typeof o&&i&&(o=t.__emotion_forwardProp);var u=o||Ie(c),l=!u("as");return function(){var d=arguments,p=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&p.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)p.push.apply(p,d);else{p.push(d[0][0]);for(var f=d.length,h=1;h<f;h++)p.push(d[h],d[0][h])}var g=m.withEmotionCache((function(e,t,n){return s.createElement(m.ThemeContext.Consumer,null,(function(r){var i=l&&e.as||c,m="",d=[],f=e;if(null==e.theme){for(var h in f={},e)f[h]=e[h];f.theme=r}"string"==typeof e.className?m=Ee(t.registered,d,e.className):null!=e.className&&(m=e.className+" ");var g=Ne(p.concat(d),t.registered,f);Re(t,g,"string"==typeof i),m+=t.key+"-"+g.name,void 0!==a&&(m+=" "+a);var y=l&&void 0===o?Ie(i):u,v={};for(var b in e)l&&"as"===b||y(b)&&(v[b]=e[b]);return v.className=m,v.ref=n||e.innerRef,s.createElement(i,v)}))}));return g.displayName=void 0!==r?r:"Styled("+("string"==typeof c?c:c.displayName||c.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=c,g.__emotion_styles=p,g.__emotion_forwardProp=o,Object.defineProperty(g,"toString",{value:function(){return"."+a}}),g.withComponent=function(t,r){return e(t,void 0!==r?ze({},n||{},{},r):n).apply(void 0,p)},g}},He=We("div",{target:"e7suutp0",label:"Wrapper"})({name:"19meogn",styles:"position:absolute;z-index:10;"}),Ve=We("div",{target:"e7suutp1",label:"UserName"})("padding:4px;font-style:italic;text-align:right;",(function(e){var t=e.theme.constants,n=e.dull;return{backgroundColor:t.color.background.secondary,color:n?t.color.text.light:t.color.text.primary}}),""),Xe=We("div",{target:"e7suutp2",label:"CommentButton"})("cursor:pointer;",(function(e){return{background:e.theme.constants.color.background.primary}}),""),Ke=We("div",{target:"e7suutp3",label:"CommentWrapper"})("display:flex;flex-direction:column;",(function(e){var t=e.theme.constants;return{background:t.color.background.primary,border:t.border.primary,borderRadius:t.borderRadius.small,boxShadow:t.boxShadow.primary}}),""),$e=We("textarea",{target:"e7suutp4",label:"StyledTextArea"})("border-left:none;border-right:none;border-top:none;padding:4px;resize:none;width:260px;&:focus{outline:none;}",(function(e){var t=e.theme.constants;return{minHeight:64,color:t.color.text.primary,borderBottom:t.border.primary,fontSize:t.fontSize.medium}}),""),Ge=We("div",{target:"e7suutp5",label:"StyledCommentArea"})("border-left:none;border-right:none;border-top:none;min-height:64px;width:260px;overflow:scroll;padding:4px;resize:none;font-style:italic;white-space:pre-line;",(function(e){var t=e.theme.constants,n=e.dull;return{color:t.color.text.light,fontSize:t.fontSize.medium,backgroundColor:n?t.color.background.light:t.color.background.primary}}),""),Je=We(l.Icon,{target:"e7suutp6",label:"CloseIcon"})({cursor:"pointer",position:"absolute",right:-6,top:-6},""),Ye=We("div",{target:"e7suutp7",label:"CommentButtonsWrapper"})("display:flex;justify-content:space-between;",(function(e){var t=e.theme.constants;return{borderTop:t.border.primary,backgroundColor:t.color.background.secondary,button:{backgroundColor:t.color.background.secondary}}}),""),Ze=function(e){var t=e.editorWrapper,n=e.marker,r=e.addComment,o=e.showCommentBox,a=e.toggleCommentBox,i=x(s.useState(""),2),u=i[0],m=i[1];return c.createElement(He,{style:de(t,n)},o?c.createElement(Ke,null,c.createElement(Je,{name:"close",onClick:a}),c.createElement($e,{autoFocus:!0,value:u,onChange:function(e){return m(e.target.value)}}),c.createElement(Ye,null,c.createElement(l.PrimaryButton,{onClick:function(){return r(u)}},"Add"))):c.createElement(Xe,null,c.createElement(l.Icon,{name:"addComment",onClick:a})))};Ze.propTypes={marker:i.object.isRequired,editorWrapper:i.object.isRequired,addComment:i.func.isRequired,showCommentBox:i.bool.isRequired,toggleCommentBox:i.func.isRequired};var Qe=l.Closeable(Ze),et=function(e){v(n,s.PureComponent);var t=w(n);function n(){var e;d(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={showCommentBox:!1},e.hideCreateToolbar=function(){var t=e.props.pmstate;Ce(t),e.closeCommentBox()},e.closeCommentBox=function(){e.setState({showCommentBox:!1})},e.toggleCommentBox=function(){var t=e.state.showCommentBox;e.setState({showCommentBox:!t})},e.addComment=function(){var t=e.props.pmstate.pmview,n=t.dispatch,r=t.state,o=e.state.commentMessage;n(r.tr.setMeta("add-comment",{message:o})),e.closeCommentBox(),t.focus()},e}return f(n,[{key:"render",value:function(){var e=this.props,t=e.editorWrapper,n=e.theme,r=this.state.showCommentBox,o=document.getElementsByClassName("nib-comment-add-marker"),a=o.length&&o[o.length-1];return a?c.createElement(u.ThemeProvider,{theme:n},c.createElement(Qe,{editorWrapper:t,marker:a,onEscKeyPress:this.closeCommentBox,onClickOutsideEditor:this.hideCreateToolbar,addComment:this.addComment,showCommentBox:r,toggleCommentBox:this.toggleCommentBox})):null}}]),n}();et.propTypes={editorWrapper:i.object.isRequired,pmstate:i.object.isRequired,theme:i.object.isRequired};var tt=function(e){var t=e.id,n=e.data,r=e.currentUser,o=e.updateComment,a=x(s.useState(!1),2),i=a[0],u=a[1],m=x(s.useState(n.message),2),d=m[0],p=m[1],f=s.useRef();return s.useEffect((function(){if(i&&f.current){var e=f.current;e.focus(),e.setSelectionRange(e.value.length,e.value.length)}}),[i]),s.useEffect((function(){if(f.current){var e=f.current,t=e.clientHeight,n=e.scrollHeight,r=e.style;t<n&&(r.height="".concat(n,"px"))}})),c.createElement(c.Fragment,null,i?c.createElement($e,{autoFocus:!0,onChange:function(e){return p(e.target.value)},ref:f,value:d}):c.createElement(Ge,null,n.message),c.createElement(Ye,null,n.userid===r.userid?c.createElement(c.Fragment,null,i?c.createElement(c.Fragment,null,c.createElement(l.PrimaryButton,{onClick:function(){o(t,d),u(!1),p("")}},"Save"),c.createElement(l.PrimaryButton,{onClick:function(){return u(!1)}},"Cancel")):c.createElement(l.PrimaryButton,{onClick:function(){u(!0),p(n.message)}},"Edit")):c.createElement("div",null),c.createElement(Ve,null,"~ ".concat(n.username))))};tt.propTypes={id:i.string.isRequired,data:i.shape({message:i.string,userid:i.string,username:i.string}).isRequired,updateComment:i.func.isRequired,currentUser:i.shape({userid:i.string,username:i.string}).isRequired};var nt=function(e){var t=e.editorWrapper,n=e.comment,r=e.marker,o=e.deleteComment,a=e.replyComment,i=e.resolveComment,u=e.updateComment,m=e.showCommentBox,d=e.toggleCommentBox,p=e.updateReply,f=e.userData,h=x(s.useState(!1),2),g=h[0],y=h[1],v=x(s.useState(""),2),b=v[0],C=v[1],w=n.data.userid;return c.createElement(He,{style:de(t,r,m)},m?c.createElement(Ke,null,c.createElement(Je,{name:"close",onClick:d}),c.createElement(tt,{id:n.id,currentUser:f,data:n.data,updateComment:u}),n.replies&&n.replies.map((function(e){return c.createElement(tt,{key:e.id,id:e.id,currentUser:f,data:e.data,updateComment:function(){p(b),C("")}})})),g&&c.createElement($e,{value:b,onChange:function(e){return C(e.target.value)}}),c.createElement(Ye,null,g?c.createElement(c.Fragment,null,c.createElement(l.PrimaryButton,{onClick:function(){y(!1),C("")}},"Cancel"),c.createElement(l.PrimaryButton,{onClick:function(){y(!1),a(n.id,b),C("")}},"Save")):c.createElement(c.Fragment,null,c.createElement(l.PrimaryButton,{onClick:function(){return y(!0)}},"Reply"),c.createElement(l.PrimaryButton,{onClick:function(){return i(n.id)}},"Resolve"),f.userid===w&&c.createElement(l.PrimaryButton,{onClick:o},"Delete")))):c.createElement(Xe,null,c.createElement(l.Icon,{name:"comment",onClick:d})))};nt.propTypes={editorWrapper:i.object.isRequired,comment:i.object.isRequired,marker:i.object.isRequired,deleteComment:i.func.isRequired,replyComment:i.func.isRequired,resolveComment:i.func.isRequired,updateComment:i.func.isRequired,showCommentBox:i.bool.isRequired,toggleCommentBox:i.func.isRequired,updateReply:i.func.isRequired,userData:i.shape({userid:i.string,username:i.string}).isRequired};var rt=l.Closeable(nt),ot=function(e){v(n,s.PureComponent);var t=w(n);function n(){var e;d(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={showCommentBox:!1},e.hideViewToolbar=function(){var t=e.props.pmstate;Ce(t),e.setState({showCommentBox:!1})},e.toggleCommentBox=function(){var t=e.state.showCommentBox;e.setState({showCommentBox:!t})},e.closeCommentBox=function(){e.setState({showCommentBox:!1})},e.getWrapperStyles=function(t){var n=e.props.editorWrapper;return de(n,t)},e.getCurrentUserData=function(){var t=e.props.pmstate.pmview.state,n=fe.getState(t).metadata||{};return{userid:n.userid,username:n.username}},e.resolveComment=function(t){var n=e.props.pmstate.pmview;(0,n.dispatch)(n.state.tr.setMeta("resolve-comment",t)),e.closeCommentBox()},e.updateComment=function(t,n){var r=e.props.pmstate.pmview;(0,r.dispatch)(r.state.tr.setMeta("update-comment",{id:t,data:{message:n}}))},e.deleteComment=function(){var t=e.props.pmstate.pmview,n=t.dispatch,r=t.state,o=e.state.comment;n(r.tr.setMeta("delete-comment",o.id))},e.updateReply=function(t,n){var r=e.state.comment,o=e.props.pmstate.pmview;(0,o.dispatch)(o.state.tr.setMeta("update-reply",{id:r.id,reply:{id:t,message:n}}))},e.replyComment=function(t,n){var r=e.props.pmstate.pmview;(0,r.dispatch)(r.state.tr.setMeta("reply-comment",{commentId:t,message:n}))},e}return f(n,[{key:"componentDidUpdate",value:function(){var e=this.props.pmstate.pmview;if(e){var t=e.state,n=ve.getState(t).comment;n!==this.state.comment&&this.setState({comment:n,showCommentBox:!1})}}},{key:"render",value:function(){var e=this.props,t=e.editorWrapper,n=e.theme,r=this.state,o=r.comment,a=r.showCommentBox;if(!o||"RESOLVED"===o.status)return null;var i=document.getElementsByClassName("nib-comment-old-marker"),s=i.length&&i[i.length-1];return s?c.createElement(u.ThemeProvider,{theme:n},c.createElement(rt,{editorWrapper:t,onEscKeyPress:this.closeCommentBox,onClickOutsideEditor:this.hideViewToolbar,comment:o,marker:s,resolveComment:this.resolveComment,replyComment:this.replyComment,updateComment:this.updateComment,deleteComment:this.deleteComment,showCommentBox:a,toggleCommentBox:this.toggleCommentBox,updateReply:this.updateReply,userData:this.getCurrentUserData()})):null}}]),n}();ot.propTypes={editorWrapper:i.object.isRequired,pmstate:i.object.isRequired,theme:i.object.isRequired};var at=function(e){var t=e.comment,n=e.deleteComment,r=e.editorWrapper,o=e.marker,a=e.reopenComment,i=e.showCommentBox,s=e.toggleCommentBox,u=e.userData,m=t.data,d=m.message,p=m.username,f=m.userid;return c.createElement(He,{style:de(r,o,i)},i?c.createElement(Ke,null,c.createElement(Je,{name:"close",onClick:s}),c.createElement(c.Fragment,null,c.createElement(Ge,{dull:!0},d),c.createElement(Ve,{dull:!0},"~ ".concat(p))),t.replies&&t.replies.map((function(e){return c.createElement("span",{key:"".concat(e,"-").concat(e.id)},c.createElement(Ge,{dull:!0},e.data.message),c.createElement(Ve,{dull:!0},"~ ".concat(e.data.username)))})),c.createElement(Ye,null,c.createElement(l.PrimaryButton,{onClick:a},"Re-open"),u.userid===f&&c.createElement(l.PrimaryButton,{onClick:n},"Delete"))):c.createElement(Xe,null,c.createElement(l.Icon,{name:"viewComment",onClick:s})))};at.propTypes={comment:i.object.isRequired,deleteComment:i.func.isRequired,editorWrapper:i.object.isRequired,marker:i.object.isRequired,reopenComment:i.func.isRequired,showCommentBox:i.bool.isRequired,toggleCommentBox:i.func.isRequired,userData:i.shape({userid:i.string,username:i.string}).isRequired};var it=l.Closeable(at),st=function(e){v(n,s.PureComponent);var t=w(n);function n(){var e;d(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={showCommentBox:!1},e.hideViewToolbar=function(){var t=e.props.pmstate;Ce(t),e.setState({showCommentBox:!1})},e.toggleCommentBox=function(){var t=e.state.showCommentBox;e.setState({showCommentBox:!t})},e.closeCommentBox=function(){e.setState({showCommentBox:!1})},e.getCurrentUserData=function(){var t=e.props.pmstate.pmview.state,n=fe.getState(t).metadata||{};return{userid:n.userid,username:n.username}},e.reopenComment=function(){var t=e.props.pmstate.pmview,n=t.dispatch,r=t.state,o=e.state.comment;n(r.tr.setMeta("reopen-comment",o.id)),e.closeCommentBox()},e.deleteComment=function(){var t=e.props.pmstate.pmview,n=t.dispatch,r=t.state,o=e.state.comment;n(r.tr.setMeta("delete-comment",o.id))},e}return f(n,[{key:"componentDidUpdate",value:function(){var e=this.props.pmstate.pmview;if(e){var t=e.state,n=ve.getState(t).comment;n!==this.state.comment&&this.setState({comment:n,showCommentBox:!1})}}},{key:"render",value:function(){var e=this.props,t=e.editorWrapper,n=e.theme,r=this.state,o=r.comment,a=r.showCommentBox;if(!o||"RESOLVED"!==o.status)return null;var i=document.getElementsByClassName("nib-comment-old-resolved-marker"),s=i.length&&i[i.length-1];return s?c.createElement(u.ThemeProvider,{theme:n},c.createElement(it,{editorWrapper:t,onClickOutsideEditor:this.hideViewToolbar,onEscKeyPress:this.closeCommentBox,marker:s,comment:o,deleteComment:this.deleteComment,reopenComment:this.reopenComment,showCommentBox:a,toggleCommentBox:this.toggleCommentBox,userData:this.getCurrentUserData()})):null}}]),n}();st.propTypes={editorWrapper:i.object.isRequired,pmstate:i.object.isRequired,theme:i.object.isRequired},e.exports=function e(t,n){var r=this;d(this,e),this.name="comment",this.init=function(e){return n=e,void((t=r.view)&&(0,t.dispatch)(t.state.tr.setMeta("set-comments",n)));var t,n},this.toolbar=[et,ot,st],this.view=void 0,this.viewUpdateCallback=function(e){r.view=e},this.updateData=function(e){return function(e,t){e&&(0,e.dispatch)(e.state.tr.setMeta("update-metadata",t))}(r.view,e)},this.getState=function(){return function(e){if(!e)return{comments:[],highlightedComment:void 0};var t=e.state,n=fe.getState(t);if(!n.license_missing){var r=n.commentState,o=ge.getState(t).comment;return{comments:r.comments,highlightedComment:o}}}(r.view)},this.getSerializableState=function(){return function(e){if(!e)return{comments:[]};var t=e.state,n=fe.getState(t);if(!n.license_missing){var r=n.commentState;return r&&r.comments?{comments:r.comments.map((function(e){return e.serialize()}))}:{comments:[]}}}(r.view)},this.updateLicenseInfo=function(e,t){ce.get("https://licencecheck.herokuapp.com/licenceCheck",{params:{licenseKey:t,plugins:["table"]}}).then((function(t){if("FAIL"===t.data.status){var n=r.view;(0,n.dispatch)(n.state.tr.setMeta("comment_license_missing",!0));var o=document.createElement("span");o.style="\n            width: 100% !important;\n            background-color: rgba(213, 0, 0, 0.8) !important;\n            height: 30px !important;\n            position: absolute !important;\n            top: 0 !important;\n            margin-left: -4px !important;\n            color: white !important;\n            text-align: center;\n            font-size: 18px !important;\n            line-height: 1.5;\n          ",o.innerText="Please get license to use advance plugins !",e.appendChild(o)}}))},this.pmPlugins=[he(t),ye,be],this.styles=function(e){return function(t){var n=t.constants,r=n.color.backgroundHighlight,o=r.primary,a=r.secondary,i=n.color,s=i.textHighlight,c=s.primary,u=s.secondary,l=i.disabled,m=l.primary,d=l.secondary;return"\n  .nib-comment-old-marker {\n    background-color: ".concat(e||a," !important;\n    color: ").concat(c," !important;\n  }\n\n  .nib-comment-marker {\n    background-color: ").concat(e?"".concat(e,"80"):o,";\n    color: ").concat(u," !important;\n  }\n\n  .nib-comment-old-resolved-marker {\n    background-color: ").concat(m," !important;\n    color: ").concat(c," !important;\n  }\n\n  .nib-comment-resolved-marker {\n    background-color: ").concat(d,";\n    color: ").concat(u," !important;\n  }\n")}}(n)}}).call(this,n("8oxB"))}}]);