(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"54wu":function(e,t,n){"use strict";(function(t){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n("UxO+"),a=n("dYwZ"),o=r(n("17x9")),s=n("q1tI"),c=r(s),l=n("WCT8"),u=n("wLTh"),d=n("qKvR");function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},C=Object.prototype.toString;function R(e){return"[object Array]"===C.call(e)}function P(e){return void 0===e}function O(e){return null!==e&&"object"==typeof e}function j(e){return"[object Function]"===C.call(e)}function I(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),R(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var A={isArray:R,isArrayBuffer:function(e){return"[object ArrayBuffer]"===C.call(e)},isBuffer:function(e){return null!==e&&!P(e)&&null!==e.constructor&&!P(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:O,isUndefined:P,isDate:function(e){return"[object Date]"===C.call(e)},isFile:function(e){return"[object File]"===C.call(e)},isBlob:function(e){return"[object Blob]"===C.call(e)},isFunction:j,isStream:function(e){return O(e)&&j(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:I,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)I(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)I(arguments[r],n);return t},extend:function(e,t,n){return I(t,(function(t,r){e[r]=n&&"function"==typeof t?E(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function T(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var L=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(A.isURLSearchParams(t))r=t.toString();else{var i=[];A.forEach(t,(function(e,t){null!=e&&(A.isArray(e)?t+="[]":e=[e],A.forEach(e,(function(e){A.isDate(e)?e=e.toISOString():A.isObject(e)&&(e=JSON.stringify(e)),i.push(T(t)+"="+T(e))})))})),r=i.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function W(){this.handlers=[]}W.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},W.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},W.prototype.forEach=function(e){A.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var M=W,N=function(e,t,n){return A.forEach(n,(function(n){e=n(e,t)})),e},_=function(e){return!(!e||!e.__CANCEL__)},z=function(e,t){A.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},D=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,i)},H=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],q=A.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=A.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},U=A.isStandardBrowserEnv()?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),A.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),A.isString(r)&&o.push("path="+r),A.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},B={"Content-Type":"application/x-www-form-urlencoded"};function F(e,t){!A.isUndefined(e)&&A.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var X,K={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(X=function(e){return new Promise((function(t,n){var r=e.data,i=e.headers;A.isFormData(r)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var o=e.auth.username||"",s=e.auth.password||"";i.Authorization="Basic "+btoa(o+":"+s)}var c,l,u=(c=e.baseURL,l=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,l):l);if(a.open(e.method.toUpperCase(),L(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var r,i,o,s,c,l="getAllResponseHeaders"in a?(r=a.getAllResponseHeaders(),c={},r?(A.forEach(r.split("\n"),(function(e){if(s=e.indexOf(":"),i=A.trim(e.substr(0,s)).toLowerCase(),o=A.trim(e.substr(s+1)),i){if(c[i]&&H.indexOf(i)>=0)return;c[i]="set-cookie"===i?(c[i]?c[i]:[]).concat([o]):c[i]?c[i]+", "+o:o}})),c):c):null,u={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:l,config:e,request:a};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(D("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,u),a=null}},a.onabort=function(){a&&(n(D("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(D("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(D(t,e,"ECONNABORTED",a)),a=null},A.isStandardBrowserEnv()){var d=U,p=(e.withCredentials||q(u))&&e.xsrfCookieName?d.read(e.xsrfCookieName):void 0;p&&(i[e.xsrfHeaderName]=p)}if("setRequestHeader"in a&&A.forEach(i,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)})),A.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),n(e),a=null)})),void 0===r&&(r=null),a.send(r)}))}),X),transformRequest:[function(e,t){return z(t,"Accept"),z(t,"Content-Type"),A.isFormData(e)||A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e)?e:A.isArrayBufferView(e)?e.buffer:A.isURLSearchParams(e)?(F(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):A.isObject(e)?(F(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};A.forEach(["delete","get","head"],(function(e){K.headers[e]={}})),A.forEach(["post","put","patch"],(function(e){K.headers[e]=A.merge(B)}));var $=K;function G(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var V=function(e){return G(e),e.headers=e.headers||{},e.data=N(e.data,e.headers,e.transformRequest),e.headers=A.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),A.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||$.adapter)(e).then((function(t){return G(e),t.data=N(t.data,t.headers,e.transformResponse),t}),(function(t){return _(t)||(G(e),t&&t.response&&(t.response.data=N(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Y=function(e,t){t=t||{};var n={},r=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];A.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),A.forEach(i,(function(r){A.isObject(t[r])?n[r]=A.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:A.isObject(e[r])?n[r]=A.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),A.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var o=r.concat(i).concat(a),s=Object.keys(t).filter((function(e){return-1===o.indexOf(e)}));return A.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function J(e){this.defaults=e,this.interceptors={request:new M,response:new M}}J.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Y(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[V,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},J.prototype.getUri=function(e){return e=Y(this.defaults,e),L(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},A.forEach(["delete","get","head","options"],(function(e){J.prototype[e]=function(t,n){return this.request(A.merge(n||{},{method:e,url:t}))}})),A.forEach(["post","put","patch"],(function(e){J.prototype[e]=function(t,n,r){return this.request(A.merge(r||{},{method:e,url:t,data:n}))}}));var Z=J;function Q(e){this.message=e}Q.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Q.prototype.__CANCEL__=!0;var ee=Q;function te(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new ee(e),t(n.reason))}))}te.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},te.source=function(){var e;return{token:new te((function(t){e=t})),cancel:e}};var ne=te;function re(e){var t=new Z(e),n=E(Z.prototype.request,t);return A.extend(n,Z.prototype,t),A.extend(n,t),n}var ie=re($);ie.Axios=Z,ie.create=function(e){return re(Y(ie.defaults,e))},ie.Cancel=ee,ie.CancelToken=ne,ie.isCancel=_,ie.all=function(e){return Promise.all(e)},ie.spread=function(e){return function(t){return e.apply(null,t)}};var ae=ie,oe=ie;ae.default=oe;var se=ae,ce=function(e){return"left"===e?"flex-start":"right"===e?"flex-end":"center"},le=function e(t,n,r){var i=this;p(this,e),this.update=function(e){if(e.attrs.height!==i.prevHeight&&i.resizeHandles.length)return i.prevHeight=e.attrs.height,i.image.style="height:".concat(e.attrs.height,";outline:2px solid #2962ff"),!0;if(e.attrs.link.href!==i.linkHref)return e.attrs.link.href?(i.anchor=document.createElement("a"),i.anchor.href=e.attrs.link.href,i.anchor.appendChild(i.image),i.anchor.className="nib-image-anchor",i.imageWrapper.appendChild(i.anchor)):i.imageWrapper.appendChild(i.image),i.linkHref=e.attrs.link.href,!0;if(e.attrs.wrap!==i.wrap||e.attrs.alignment!==i.alignment){if(i.wrap=e.attrs.wrap,i.alignment=e.attrs.alignment,i.resetStyles(),e.attrs.wrap)return i.dom.classList.add("nib-image-outer-block"),i.imageWrapper.classList.add("nib-image-wrap-".concat(i.wrap)),!0;e.attrs.alignment&&(i.dom.classList.add("nib-image-outer-flex"),i.dom.style.justifyContent=ce(e.attrs.alignment))}return!0},this.selectNode=function(){i.image&&i.imageWrapper.classList.add("nib-selected-image-wrapper"),i.addResizeHandles()},this.deselectNode=function(){i.image&&i.imageWrapper.classList.remove("nib-selected-image-wrapper"),i.cleanupResizeHandles()},this.destroy=function(){i.cleanupResizeHandles(),i.imageWrapper.removeChild(i.image),i.dom.removeChild(i.imageWrapper)},this.resetStyles=function(){i.dom.classList.remove("nib-image-outer-flex"),i.dom.classList.remove("nib-image-outer-block"),i.dom.style.justifyContent="",i.imageWrapper.classList.remove("nib-image-wrap-left"),i.imageWrapper.classList.remove("nib-image-wrap-right")},this.addResizeHandles=function(){[{className:"nib-image-resize-lt",dir:-1},{className:"nib-image-resize-rt",dir:-1},{className:"nib-image-resize-lb",dir:1},{className:"nib-image-resize-rb",dir:1}].forEach((function(e){var t=e.className,n=e.dir,r=document.createElement("div");r.className=t,r.setAttribute("data-dir",n),i.imageWrapper.appendChild(r),r.addEventListener("mousedown",i.handleResizeHandleMouseDown),r.addEventListener("click",i.clickHandler),i.resizeHandles.push(r)})),i.image.style.outline="2px solid #2962ff",window.addEventListener("mouseup",i.handleResizeHandleMouseUp)},this.cleanupResizeHandles=function(){i.image.style.outline="none",i.resizeHandles.forEach((function(e){e.removeEventListener("mousedown",i.handleResizeHandleMouseDown),i.imageWrapper.removeChild(e)})),window.removeEventListener("mousemove",i.handleResizeHandleMouseMove),i.resizeHandles=[]},this.handleResizeHandleMouseUp=function(){i.resizing&&(i.resizing=!1,i.dir=void 0)},this.clickHandler=function(e){e.stopPropagation(),e.preventDefault()},this.handleResizeHandleMouseDown=function(e){i.resizing||(i.clickHandler(e),i.resizing=!0,i.dir=parseInt(e.target.getAttribute("data-dir"),10),i.prevPoint=e.clientY,window.addEventListener("mousemove",i.handleResizeHandleMouseMove))},this.handleResizeHandleMouseMove=function(e){if(i.resizing){i.clickHandler(e);var t=i.view,n=t.state,r=t.dispatch,a=i.image.getBoundingClientRect();i.imageHeight=a.height;var o=i.imageHeight+(e.clientY-i.prevPoint)*i.dir;i.prevPoint=e.clientY;var s=n.selection,c=n.tr,l=s.from,u=s.node;r(c.setNodeMarkup(l,void 0,v(v({},u.attrs),{},{height:"".concat(o,"px")})))}},this.node=t,this.view=n,this.getPos=r,this.linkHref="",this.dom=document.createElement("div"),this.dom.className="nib-image-outer-wrapper",this.dom.tabIndex=-1,this.dom.style.justifyContent=ce(t.attrs.alignment),this.imageWrapper=document.createElement("div"),this.imageWrapper.className="nib-image-wrapper",this.dom.appendChild(this.imageWrapper),this.image=document.createElement("img"),this.image.src=t.attrs.src,this.image.style="height:".concat(t.attrs.height,";"),t.attrs.link.href?(this.anchor=document.createElement("a"),this.anchor.href=t.attrs.link.href,this.anchor.appendChild(this.image),this.anchor.className="nib-image-anchor",this.imageWrapper.appendChild(this.anchor)):this.imageWrapper.appendChild(this.image),this.prevHeight=t.attrs.height,this.alignment=t.attrs.alignment,this.wrap=t.attrs.wrap,this.wrap?(this.dom.classList.add("nib-image-outer-block"),this.imageWrapper.classList.add("nib-image-wrap-".concat(this.wrap))):(this.dom.classList.add("nib-image-outer-flex"),this.alignment&&(this.dom.style.justifyContent=ce(t.attrs.alignment))),this.resizeHandles=[]},ue=function(e,t,n){var r=e.selection,i=e.tr,a=r.from,o=r.node;t(i.setNodeMarkup(a,void 0,v(v({},o.attrs),{},{wrap:void 0,alignment:n})))},de=function(e,t,n){var r=e.selection,i=e.tr,a=r.from,o=r.node;t(i.setNodeMarkup(a,void 0,v(v({},o.attrs),{},{alignment:void 0,wrap:n})))},pe=function(e,t,n){var r=e.selection,i=e.tr,a=r.from,o=r.node;t(i.setNodeMarkup(a,void 0,v(v({},o.attrs),{},{link:{href:n}})))},fe=function(e,t,n){var r=t.files[0];return!!r&&(n(r).then((function(t){var n=t.src;!function(e,t,n){var r=e.selection,i=r.$from,a=r.$to,o=e.schema.nodes.advanceImage;t(e.tr.replaceRangeWith(i.pos,a.pos,o.create({src:n})))}(e.state,e.dispatch,n),e.focus()})),!0)},me=new i.PluginKey("advance-image"),he=function(e){return me.getState(e).isImageSelected},ge=function(e,t){return!he(e)&&(t(e.tr.setMeta("show-image-modal",!0)),!0)},ve=function(){return{"Mod-p":ge}},ye={image:{key:"Mod-P",label:"Insert Image"}},we={nodes:{advanceImage:a.nodes.advanceImage}},be=function(e){var t=e.constants;return"\n  .nib-image-outer-wrapper {\n    width: 100%;\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .nib-image-outer-flex {\n    display: inline-flex;\n    justify-content: center;\n  }\n\n  .nib-image-outer-block {\n    display: block;\n  }\n\n  .nib-image-wrapper {\n    display: inline-block;\n    position: relative;\n    > img {\n      width: auto;\n    }\n  }\n\n  .nib-image-wrap-left {\n    float: left;\n    margin-right: 10px;\n  }\n\n  .nib-image-wrap-right {\n    float: right;\n    margin-left: 10px;\n  }\n\n  .nib-image-resize-lt {\n    height: 10px;\n    width: 10px;\n\n    position: absolute;\n    left: -5px;\n    top: -5px;\n\n    background-color: ".concat(t.color.highlight.primary,";\n    cursor: nwse-resize;\n  }\n\n  .nib-image-resize-rb {\n    background-color: ").concat(t.color.highlight.primary,";\n    bottom: 0px;\n    cursor: nwse-resize;\n  \n    height: 10px;\n    position: absolute;\n    right: -5px;\n    width: 10px;\n  }\n\n  .nib-image-resize-lb {\n    background-color: ").concat(t.color.highlight.primary,";\n    bottom: 0px;\n    cursor: nesw-resize;\n  \n    height: 10px;\n    left: -5px;\n    position: absolute;\n    width: 10px;\n  }\n\n  .nib-image-resize-rt {\n    background-color: ").concat(t.color.highlight.primary,";\n    cursor: nesw-resize;\n\n    height: 10px;\n    position: absolute;\n    right: -5px;\n    top: -5px;\n    width: 10px;\n  }\n\n  .nib-image-anchor {\n    display: block;\n    pointer-events: none;\n  }\n")},ke=function(e){var t="Windows"===function(){for(var e=navigator.userAgent,t=[{s:"Windows",r:/Win16/},{s:"Windows",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows",r:/(Windows 98|Win98)/},{s:"Windows",r:/Windows CE/},{s:"Windows",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows",r:/Windows NT 5.2/},{s:"Windows",r:/Windows NT 6.0/},{s:"Windows",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/}],n=Object.keys(t),r=0;r<n.length;r+=1){var i=t[n[r]];if(i.r.test(e))return i.s}return""}()?"^":"\u2318",n="";return e.label&&(n="".concat(e.label," ")),(n=(n=(n+=e.key).replace("Mod",t)).replace("Shift","\u21e7")).replace("Alt","\u2325")},xe=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function Se(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Ee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ce=Se((function(e){return Ee.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function Re(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]):r+=n+" "})),r}var Pe=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert("."+r,i,e.sheet,!0),i=i.next}while(void 0!==i)}},Oe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},je=/[A-Z]|^ms/g,Ie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ae=function(e){return 45===e.charCodeAt(1)},Te=function(e){return null!=e&&"boolean"!=typeof e},Le=Se((function(e){return Ae(e)?e:e.replace(je,"-$&").toLowerCase()})),We=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Ie,(function(e,t,n){return Ne={name:t,styles:n,next:Ne},t}))}return 1===Oe[e]||Ae(e)||"number"!=typeof t||0===t?t:t+"px"};function Me(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ne={name:n.name,styles:n.styles,next:Ne},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)Ne={name:i.name,styles:i.styles,next:Ne},i=i.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Me(e,t,n[i],!1);else for(var a in n){var o=n[a];if("object"!=typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Te(o)&&(r+=Le(a)+":"+We(a,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Me(e,t,o,!1);switch(a){case"animation":case"animationName":r+=Le(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var c=0;c<o.length;c++)Te(o[c])&&(r+=Le(a)+":"+We(a,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=Ne,o=n(e);return Ne=a,Me(e,t,o,r)}break;case"string":}if(null==t)return n;var s=t[n];return void 0===s||r?n:s}var Ne,_e=/label:\s*([^\s;\n{]+)\s*;/g,ze=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ne=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Me(n,t,a,!1)):i+=a[0];for(var o=1;o<e.length;o++)i+=Me(n,t,e[o],46===i.charCodeAt(i.length-1)),r&&(i+=a[o]);_e.lastIndex=0;for(var s,c="";null!==(s=_e.exec(i));)c+="-"+s[1];return{name:function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c,styles:i,next:Ne}},De=Ce,He=function(e){return"theme"!==e&&"innerRef"!==e},qe=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?De:He};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(n,!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function e(t,n){var r,i,a;void 0!==n&&(r=n.label,a=n.target,i=t.__emotion_forwardProp&&n.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&n.shouldForwardProp(e)}:n.shouldForwardProp);var o=t.__emotion_real===t,c=o&&t.__emotion_base||t;"function"!=typeof i&&o&&(i=t.__emotion_forwardProp);var l=i||qe(c),u=!l("as");return function(){var p=arguments,f=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==p[0]||void 0===p[0].raw)f.push.apply(f,p);else{f.push(p[0][0]);for(var m=p.length,h=1;h<m;h++)f.push(p[h],p[0][h])}var g=d.withEmotionCache((function(e,t,n){return s.createElement(d.ThemeContext.Consumer,null,(function(r){var o=u&&e.as||c,d="",p=[],m=e;if(null==e.theme){for(var h in m={},e)m[h]=e[h];m.theme=r}"string"==typeof e.className?d=Re(t.registered,p,e.className):null!=e.className&&(d=e.className+" ");var g=ze(f.concat(p),t.registered,m);Pe(t,g,"string"==typeof o),d+=t.key+"-"+g.name,void 0!==a&&(d+=" "+a);var v=u&&void 0===i?qe(o):l,y={};for(var w in e)u&&"as"===w||v(w)&&(y[w]=e[w]);return y.className=d,y.ref=n||e.innerRef,s.createElement(o,y)}))}));return g.displayName=void 0!==r?r:"Styled("+("string"==typeof c?c:c.displayName||c.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=c,g.__emotion_styles=f,g.__emotion_forwardProp=i,Object.defineProperty(g,"toString",{value:function(){return"."+a}}),g.withComponent=function(t,r){return e(t,void 0!==r?Be({},n||{},{},r):n).apply(void 0,f)},g}},Xe={uploadImage:function(e,t){return new Promise((function(n,r){e||r(new Error("No file selected.")),function(e,t){return new Promise((function(n,r){var i=new XMLHttpRequest;i.open("GET","/sign-s3?file-name=".concat(e.name,"&file-type=").concat(e.type,"&key=").concat(t)),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(JSON.parse(i.responseText)):r(new Error("Could not get signed URL.")))},i.send()}))}(e,t).then((function(t){var r=t.signedRequest,i=t.url;(function(e,t,n){return new Promise((function(r,i){var a=new XMLHttpRequest;a.open("PUT",t),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?r(n):i(new Error("Could not upload file.")))},a.send(e)}))})(e,r,i).then((function(e){return n({src:e})}))}))}))}};var Ke=function(e){y(n,s.PureComponent);var t=k(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={uploading:!1,imageSrc:"",srcRequiredError:!1},e.insertImageInEditor=function(){var t=e.state.imageSrc;if(t){var n=e.props,r=n.pmstate,i=n.hideModal,a=r.pmview,o=a.state,s=a.dispatch,c=o.selection,l=c.$from,u=c.$to,d=o.schema.nodes.advanceImage;s(o.tr.replaceRangeWith(l.pos,u.pos,d.create({src:t}))),i(),a.focus()}else e.setState({srcRequiredError:!0})},e.updateImageSrc=function(t){var n=e.state.srcRequiredError;e.setState({imageSrc:t,srcRequiredError:n&&!t})},e.insertImage=function(t){var n=e.props,r=n.uploadCallback,i=n.licenseKey;e.setState({uploading:!0});var a=r||i&&Xe.uploadImage;a&&a(t,i).then((function(t){var n=t.src;n?e.updateImageSrc(n):e.updateImageSrc("")})).catch((function(){e.updateImageSrc("")})).finally((function(){e.setState({uploading:!1})}))},e.onImageDrop=function(t){e.stopDefault(t);for(var n=t.dataTransfer,r=n.items,i=n.files,a=r||i,o=!!r,s=0;s<a.length;s+=1)if((!o||"file"===a[s].kind)&&a[s].type.match("^image/")){var c=o?a[s].getAsFile():a[s];e.insertImage(c)}},e.handleImageInputChange=function(t){var n=t.target.files;e.insertImage(n[0])},e.stopDefault=function(e){e.preventDefault(),e.stopPropagation()},e}return m(n,[{key:"render",value:function(){var e=this,t=this.props.hideModal,n=this.state,r=n.uploading,i=n.imageSrc,a=n.srcRequiredError;return c.createElement(l.Modal,{hideModal:t,title:"Image",render:function(){return c.createElement($e,null,c.createElement(Ve,null,"Enter url or upload"),c.createElement(Ge,null,c.createElement(Ze,{placeholder:"Url",autoFocus:!0,value:i,onChange:function(t){return e.updateImageSrc(t.target.value)},error:a}),c.createElement(Qe,{htmlFor:"fileInput"},c.createElement(et,{type:"file",id:"fileInput",onChange:e.handleImageInputChange}),c.createElement(Ye,{onDragEnter:e.stopDefault,onDragOver:e.stopDefault,onDrop:e.onImageDrop,uploading:r,src:i},i&&c.createElement(rt,null,c.createElement(it,{src:i,alt:"uploaded_image"})),c.createElement(Je,{imageSrc:i},"Drag and Drop the Image",c.createElement("br",null),"or",c.createElement("br",null),"Click to Upload"),r&&c.createElement(tt,{uploading:r}))),c.createElement(nt,null,c.createElement(l.PrimaryButton,{onClick:e.insertImageInEditor},"Insert"),c.createElement(l.Space,{size:l.SpaceSize.xl}),c.createElement(l.PrimaryButton,{onClick:t},"Cancel"))))}})}}]),n}();Ke.propTypes={licenseKey:o.string,hideModal:o.func.isRequired,uploadCallback:o.func.isRequired,pmstate:o.object.isRequired},Ke.defaultProps={licenseKey:void 0};var $e=Fe("div",{target:"e1kw4jck0",label:"Wrapper"})("",(function(){return{padding:"0px 24px 10px",height:"100%"}}),""),Ge=Fe("div",{target:"e1kw4jck1",label:"InnerWrapper"})({name:"17fmpgl",styles:"align-items:center;display:flex;flex-direction:column;height:95%;"}),Ve=Fe("div",{target:"e1kw4jck2",label:"SubTitle"})("",(function(e){return{fontSize:e.theme.constants.fontSize.large}}),""),Ye=Fe("span",{target:"e1kw4jck3",label:"UploadSection"})("align-items:center;display:flex;flex-direction:column;justify-content:center;position:relative;height:75%;width:35%;min-width:200px;margin:28px auto 0 auto;padding:20px;background-repeat:no-repeat;background-size:contain;",(function(e){var t=e.theme,n=e.uploading,r=e.src;return{border:"1px dashed ".concat(n||r?t.constants.color.highlight.primary:t.constants.color.border.primary)}}),""),Je=Fe("span",{target:"e1kw4jck4",label:"UploadLabel"})("margin-top:20px;text-align:center;z-index:1;margin-bottom:10px;",(function(e){var t=e.theme.constants;return{color:e.imageSrc?t.color.background:t.color.text.primary}}),""),Ze=Fe(l.Input,{target:"e1kw4jck5",label:"StyledInput"})("",(function(){return{width:"75%",maxWidth:400,"> input":{width:"100%",margin:"0 auto"}}}),""),Qe=Fe("label",{target:"e1kw4jck6",label:"StyledLabel"})("",(function(){return{height:"75%",width:"100%"}}),""),et=Fe("input",{target:"e1kw4jck7",label:"FileUploadInput"})({name:"1hyfx7x",styles:"display:none;"}),tt=Fe(l.Spinner,{target:"e1kw4jck8",label:"StyledSpinner"})("z-index:1;margin-top:10px;",(function(e){return{visibility:e?"visible":"hidden"}}),""),nt=Fe("div",{target:"e1kw4jck9",label:"ButtonSection"})({name:"1wcba0h",styles:"display:flex;margin-top:20px;"}),rt=Fe("span",{target:"e1kw4jck10",label:"ImageWrapper"})({name:"jqdfq9",styles:"margin:20px;position:absolute;top:0;left:0;height:calc(100% - 40px);width:calc(100% - 40px);display:flex;justify-content:center;align-items:center;"}),it=Fe("img",{target:"e1kw4jck11",label:"StyledImage"})({name:"1p9pqha",styles:"height:auto;width:auto;max-height:100%;max-width:100%;"}),at=function(e){var t=e.pmstate,n=e.setShowLinkAdd;if(!t)return null;var r=t.pmview;if(!r)return null;if(me.getState(r.state).license_missing)return null;var i=x(s.useState(""),2),a=i[0],o=i[1],u=function(){var e=r.state,t=r.dispatch;pe(e,t,a),n(!1),r.focus()},d=function(e){"Enter"===e.key&&u()};return c.createElement(ot,null,c.createElement(l.Input,{placeholder:"Href",name:"href",onChange:function(e){return o(e.target.value)},onKeyPress:d,value:a}),c.createElement(l.PrimaryButton,{onKeyPress:d,onClick:u},"Add"),c.createElement(l.PrimaryButton,{onClick:function(){n(!1),r.focus()}},"Cancel"))};at.propTypes={pmstate:o.object.isRequired,setShowLinkAdd:o.func.isRequired};var ot=Fe("div",{target:"ej0k4ld0",label:"Wrapper"})("align-items:center;display:flex;",(function(e){var t=e.theme.constants;return{borderRadius:t.borderRadius,fontSize:t.fontSize.medium}}),""),st=function(e){var t=e.pmstate,n=e.setShowLinkEdit;if(!t)return null;var r=t.pmview;if(!r)return null;if(me.getState(r.state).license_missing)return null;var i=r.state.selection.node,a=x(s.useState(i.attrs.link.href),2),o=a[0],u=a[1],d=function(){var e=r.state,t=r.dispatch;pe(e,t,o),n(!1),r.focus()};return c.createElement(ct,null,c.createElement(l.Input,{placeholder:"Href",name:"href",onChange:function(e){return u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&d()},value:o}),c.createElement(l.PrimaryButton,{onClick:d},"Update"),c.createElement(l.PrimaryButton,{onClick:function(){var e=r.state,t=r.dispatch;pe(e,t,""),n(!1),r.focus()}},"Unlink"))};st.propTypes={pmstate:o.object.isRequired,setShowLinkEdit:o.func.isRequired};var ct=Fe("div",{target:"e1bedx3y0",label:"Wrapper"})("align-items:center;display:flex;",(function(e){var t=e.theme.constants;return{borderRadius:t.borderRadius,fontSize:t.fontSize.medium}}),""),lt=[{title:"Align Left",name:"alignLeft",icon:"alignLeft"},{title:"Align Center",name:"alignCenter",icon:"alignCenter"},{title:"Align Right",name:"alignRight",icon:"alignRight"},{title:"Wrap Left",name:"wrapLeft",icon:"wrapLeft"},{title:"Wrap Right",name:"wrapRight",icon:"wrapRight"},{title:"Link Image",name:"linkImage",icon:"link"},{title:"Delete Image",name:"deleteImage",icon:"trash"}],ut=function(e){var t=e.pmstate,n=e.editorWrapper,r=e.marker,i=e.theme,a=t.pmview,o=x(s.useState(""),2),d=o[0],p=o[1],f=x(s.useState(""),2),m=f[0],h=f[1],g=function(e){var t,n=a.state,r=a.dispatch,i=e.currentTarget.name;"deleteImage"===i?function(e,t){var n=e.selection.$to;t(e.tr.delete(n.pos-1,n.pos))}(n,r):"alignLeft"===i?ue(n,r,"left"):"alignRight"===i?ue(n,r,"right"):"alignCenter"===i?ue(n,r,"center"):"wrapLeft"===i?de(n,r,"left"):"wrapRight"===i?de(n,r,"right"):"linkImage"===i&&((t=a.state.selection.node).attrs.link&&t.attrs.link.href?h(!0):p(!0)),a.focus()};if(a){var v=a.state;if(me.getState(v).license_missing)return null}return c.createElement(u.ThemeProvider,{theme:i},c.createElement(l.Popup,{onEscKeyPress:function(){},onClickOutsideEditor:function(){},editorWrapper:n,marker:r,render:function(){return c.createElement("div",null,c.createElement(pt,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},lt.map((function(e){var t=e.title,n=e.name,r=e.icon;return c.createElement(l.ToolbarButton,{key:"image_menu_option-".concat(n),onClick:g,name:n,title:t},c.createElement(l.Icon,{name:r}))}))),d&&c.createElement(at,{pmstate:t,setShowLinkAdd:p}),m&&c.createElement(st,{pmstate:t,setShowLinkEdit:h}))}}))};ut.propTypes={pmstate:o.object.isRequired,editorWrapper:o.object.isRequired,marker:o.object.isRequired,theme:o.object.isRequired};var dt={name:"image_menu",getMarker:function(e){if(e){var t=document.getElementsByClassName("nib-selected-image-wrapper");return t.length&&t[0]}},condition:function(e){if(e)return me.getState(e.state).isImageSelected},component:ut},pt=Fe("div",{target:"e1rwti4j0",label:"Wrapper"})("align-items:center;display:flex;",(function(e){var t=e.theme.constants;return{borderRadius:t.borderRadius,fontSize:t.fontSize.medium}}),""),ft=function(){function e(t){var n,r;p(this,e),this.KeymapInfo=ye,this.keymaps=ve,this.name="advance-image",this.popups=[dt],this.schema=we,this.styles=be,this.toolbarComponent=void 0,this.view=void 0,this.toolbarComponent=(n=t,(r=function(e){y(r,s.PureComponent);var t=k(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).showModal=function(){var t=e.props.pmstate.pmview,n=t.state;(0,t.dispatch)(n.tr.setMeta("show-image-modal",!0))},e.hideModal=function(){var t=e.props.pmstate.pmview,n=t.state;(0,t.dispatch)(n.tr.setMeta("show-image-modal",!1))},e.checkShowModal=function(){var t=e.props.pmstate.pmview;if(!t)return!1;var n=t.state;return me.getState(n).showImageModal},e}return m(r,[{key:"render",value:function(){var e=this.props,t=e.pmstate,r=e.theme,i=t.pmview;if(i){var a=i.state;if(me.getState(a).license_missing)return null}var o=this.checkShowModal(),s=he(i.state);return c.createElement(u.ThemeProvider,{theme:r},c.createElement(l.ToolbarButton,{disabled:s,onClick:this.showModal,title:ke(ye.image)},c.createElement(l.Icon,{name:"image",selected:s})),o&&c.createElement(Ke,{pmstate:t,hideModal:this.hideModal,uploadCallback:n}))}}]),r}()).propTypes={pmstate:o.object.isRequired,theme:o.object.isRequired},r),this.pmPlugin=function(e){return new i.Plugin({key:me,state:{init:function(){return{showImageModal:!1}},apply:function(e,t,n,r){if(e.getMeta("advance-image_license_missing"))return{license_missing:!0};if(t.license_missing)return t;var i=r.selection,a=r.schema;return!0===e.getMeta("show-image-modal")?v(v({},t),{},{showImageModal:!0}):!1===e.getMeta("show-image-modal")?v(v({},t),{},{showImageModal:!1}):i.node&&i.node.type===a.nodes.advanceImage?v(v({},t),{},{isImageSelected:!0}):v(v({},t),{},{isImageSelected:!1})}},props:{nodeViews:{advanceImage:function(e,t,n){return new le(e,t,n)}},handleDrop:function(t,n,r,i){if(i||!e)return!1;n.preventDefault();var a=n.dataTransfer;return!!a&&fe(t,a,e)},handlePaste:function(t,n){if(!e)return!1;n.preventDefault();var r=n.clipboardData;return!!r&&fe(t,r,e)}}})}(t)}return m(e,[{key:"viewUpdateCallback",value:function(e){this.view=e}},{key:"updateLicenseInfo",value:function(e,t){var n=this;se.get("https://licencecheck.herokuapp.com/licenceCheck",{params:{licenseKey:t,plugins:["advance-image"]}}).then((function(t){if("FAIL"===t.data.status){var r=n.view;(0,r.dispatch)(r.state.tr.setMeta("advance-image_license_missing",!0));var i=document.createElement("span");i.style="\n            width: 100% !important;\n            background-color: rgba(213, 0, 0, 0.8) !important;\n            height: 30px !important;\n            position: absolute !important;\n            top: 0 !important;\n            margin-left: -4px !important;\n            color: white !important;\n            text-align: center;\n            font-size: 18px !important;\n            line-height: 1.5;\n          ",i.innerText="Please get license to use advance plugins !",e.appendChild(i)}}))}}]),e}();e.exports=ft}).call(this,n("8oxB"))}}]);