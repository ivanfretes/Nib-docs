(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{QWVb:function(t,e,r){"use strict";(function(e){function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var o=r("UxO+"),i=r("MEpN"),a=r("V2qZ"),s=r("q1tI"),c=n(s),p=r("qKvR"),u=n(r("17x9")),f=r("WCT8"),l=r("wLTh");function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function w(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var b=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},S=Object.prototype.toString;function k(t){return"[object Array]"===S.call(t)}function C(t){return void 0===t}function x(t){return null!==t&&"object"==typeof t}function O(t){return"[object Function]"===S.call(t)}function M(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),k(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var R={isArray:k,isArrayBuffer:function(t){return"[object ArrayBuffer]"===S.call(t)},isBuffer:function(t){return null!==t&&!C(t)&&null!==t.constructor&&!C(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:x,isUndefined:C,isDate:function(t){return"[object Date]"===S.call(t)},isFile:function(t){return"[object File]"===S.call(t)},isBlob:function(t){return"[object Blob]"===S.call(t)},isFunction:O,isStream:function(t){return x(t)&&O(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:M,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,o=arguments.length;n<o;n++)M(arguments[n],r);return e},deepMerge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]="object"==typeof r?t({},r):r}for(var n=0,o=arguments.length;n<o;n++)M(arguments[n],r);return e},extend:function(t,e,r){return M(e,(function(e,n){t[n]=r&&"function"==typeof e?b(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function E(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var T=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(R.isURLSearchParams(e))n=e.toString();else{var o=[];R.forEach(e,(function(t,e){null!=t&&(R.isArray(t)?e+="[]":t=[t],R.forEach(t,(function(t){R.isDate(t)?t=t.toISOString():R.isObject(t)&&(t=JSON.stringify(t)),o.push(E(e)+"="+E(t))})))})),n=o.join("&")}if(n){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t};function _(){this.handlers=[]}_.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},_.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},_.prototype.forEach=function(t){R.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var A=_,N=function(t,e,r){return R.forEach(r,(function(r){t=r(t,e)})),t},j=function(t){return!(!t||!t.__CANCEL__)},F=function(t,e){R.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))},P=function(t,e,r,n,o){return function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,r,n,o)},z=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],I=R.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=R.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0},D=R.isStandardBrowserEnv()?{write:function(t,e,r,n,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),R.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),R.isString(n)&&a.push("path="+n),R.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},L={"Content-Type":"application/x-www-form-urlencoded"};function B(t,e){!R.isUndefined(t)&&R.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var U,q={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(U=function(t){return new Promise((function(e,r){var n=t.data,o=t.headers;R.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password||"";o.Authorization="Basic "+btoa(a+":"+s)}var c,p,u=(c=t.baseURL,p=t.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(p)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(c,p):p);if(i.open(t.method.toUpperCase(),T(u,t.params,t.paramsSerializer),!0),i.timeout=t.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n,o,a,s,c,p="getAllResponseHeaders"in i?(n=i.getAllResponseHeaders(),c={},n?(R.forEach(n.split("\n"),(function(t){if(s=t.indexOf(":"),o=R.trim(t.substr(0,s)).toLowerCase(),a=R.trim(t.substr(s+1)),o){if(c[o]&&z.indexOf(o)>=0)return;c[o]="set-cookie"===o?(c[o]?c[o]:[]).concat([a]):c[o]?c[o]+", "+a:a}})),c):c):null,u={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:p,config:t,request:i};!function(t,e,r){var n=r.config.validateStatus;!n||n(r.status)?t(r):e(P("Request failed with status code "+r.status,r.config,null,r.request,r))}(e,r,u),i=null}},i.onabort=function(){i&&(r(P("Request aborted",t,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(P("Network Error",t,null,i)),i=null},i.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(P(e,t,"ECONNABORTED",i)),i=null},R.isStandardBrowserEnv()){var f=D,l=(t.withCredentials||I(u))&&t.xsrfCookieName?f.read(t.xsrfCookieName):void 0;l&&(o[t.xsrfHeaderName]=l)}if("setRequestHeader"in i&&R.forEach(o,(function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)})),R.isUndefined(t.withCredentials)||(i.withCredentials=!!t.withCredentials),t.responseType)try{i.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&i.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){i&&(i.abort(),r(t),i=null)})),void 0===n&&(n=null),i.send(n)}))}),U),transformRequest:[function(t,e){return F(e,"Accept"),F(e,"Content-Type"),R.isFormData(t)||R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)?t:R.isArrayBufferView(t)?t.buffer:R.isURLSearchParams(t)?(B(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):R.isObject(t)?(B(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};R.forEach(["delete","get","head"],(function(t){q.headers[t]={}})),R.forEach(["post","put","patch"],(function(t){q.headers[t]=R.merge(L)}));var J=q;function H(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var W=function(t){return H(t),t.headers=t.headers||{},t.data=N(t.data,t.headers,t.transformRequest),t.headers=R.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),R.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||J.adapter)(t).then((function(e){return H(t),e.data=N(e.data,e.headers,t.transformResponse),e}),(function(e){return j(e)||(H(t),e&&e.response&&(e.response.data=N(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},$=function(t,e){e=e||{};var r={},n=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];R.forEach(n,(function(t){void 0!==e[t]&&(r[t]=e[t])})),R.forEach(o,(function(n){R.isObject(e[n])?r[n]=R.deepMerge(t[n],e[n]):void 0!==e[n]?r[n]=e[n]:R.isObject(t[n])?r[n]=R.deepMerge(t[n]):void 0!==t[n]&&(r[n]=t[n])})),R.forEach(i,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])}));var a=n.concat(o).concat(i),s=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return R.forEach(s,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r};function V(t){this.defaults=t,this.interceptors={request:new A,response:new A}}V.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=$(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[W,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},V.prototype.getUri=function(t){return t=$(this.defaults,t),T(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},R.forEach(["delete","get","head","options"],(function(t){V.prototype[t]=function(e,r){return this.request(R.merge(r||{},{method:t,url:e}))}})),R.forEach(["post","put","patch"],(function(t){V.prototype[t]=function(e,r,n){return this.request(R.merge(n||{},{method:t,url:e,data:r}))}}));var G=V;function X(t){this.message=t}X.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},X.prototype.__CANCEL__=!0;var K=X;function Y(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new K(t),e(r.reason))}))}Y.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Y.source=function(){var t;return{token:new Y((function(e){t=e})),cancel:t}};var Z=Y;function Q(t){var e=new G(t),r=b(G.prototype.request,e);return R.extend(r,G.prototype,e),R.extend(r,e),r}var tt=Q(J);tt.Axios=G,tt.create=function(t){return Q($(tt.defaults,t))},tt.Cancel=K,tt.CancelToken=Z,tt.isCancel=j,tt.all=function(t){return Promise.all(t)},tt.spread=function(t){return function(e){return t.apply(null,e)}};var et=tt,rt=tt;et.default=rt;var nt=et,ot=Math.pow(2,16);function it(t,e){return t+e*ot}function at(t){return 65535&t}var st=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},ct=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};ct.prototype.recover=function(t){var e=0,r=at(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+function(t){return(t-(65535&t))/ot}(t)},ct.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},ct.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},ct.prototype._map=function(t,e,r){for(var n=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>t)break;var c=this.ranges[a+o],p=this.ranges[a+i],u=s+c;if(t<=u){var f=s+n+((c?t==s?-1:t==u?1:e:e)<0?0:p);if(r)return f;var l=it(a/3,t-s);return new st(f,e<0?t!=s:t!=u,l)}n+=p-c}return r?t+n:new st(t+n)},ct.prototype.touches=function(t,e){for(var r=0,n=at(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var c=this.ranges[a+o];if(t<=s+c&&a==3*n)return!0;r+=this.ranges[a+i]-c}return!1},ct.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),c=this.ranges[n+e],p=this.ranges[n+r];t(a,a+c,s,s+p),o+=p-c}},ct.prototype.invert=function(){return new ct(this.ranges,!this.inverted)},ct.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},ct.offset=function(t){return 0==t?ct.empty:new ct(t<0?[0,-t,0]:[0,0,t])},ct.empty=new ct([]);var pt=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function ut(t){var e=Error.call(this,t);return e.__proto__=ut.prototype,e}pt.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new pt(this.maps,this.mirror,t,e)},pt.prototype.copy=function(){return new pt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},pt.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},pt.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},pt.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},pt.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},pt.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},pt.prototype.invert=function(){var t=new pt;return t.appendMappingInverted(this),t},pt.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},pt.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},pt.prototype._map=function(t,e,r){for(var n=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(t,s))t=a.recover(s);else{var c=a.mapResult(t,e);if(null!=c.recover){var p=this.getMirror(i);if(null!=p&&p>i&&p<this.to){if(c.deleted){i=p,t=this.maps[p].recover(c.recover);continue}(o||(o=Object.create(null)))[p]=c.recover}}c.deleted&&(n=!0),t=c.pos}}return r?t:new st(t,n)},ut.prototype=Object.create(Error.prototype),ut.prototype.constructor=ut,ut.prototype.name="TransformError";var ft=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new pt},lt={before:{configurable:!0},docChanged:{configurable:!0}};function ht(){throw new Error("Override me")}lt.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ft.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new ut(e.failed);return this},ft.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},lt.docChanged.get=function(){return this.steps.length>0},ft.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(ft.prototype,lt);var dt=Object.create(null),mt=function(){};mt.prototype.apply=function(t){return ht()},mt.prototype.getMap=function(){return ct.empty},mt.prototype.invert=function(t){return ht()},mt.prototype.map=function(t){return ht()},mt.prototype.merge=function(t){return null},mt.prototype.toJSON=function(){return ht()},mt.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=dt[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},mt.jsonID=function(t,e){if(t in dt)throw new RangeError("Duplicate use of step JSON ID "+t);return dt[t]=e,e.prototype.jsonID=t,e};var vt=function(t,e){this.doc=t,this.failed=e};vt.ok=function(t){return new vt(t,null)},vt.fail=function(t){return new vt(null,t)},vt.fromReplace=function(t,e,r,n){try{return vt.ok(t.replace(e,r,n))}catch(t){if(t instanceof i.ReplaceError)return vt.fail(t.message);throw t}};var gt=function(t){function e(e,r,n,o){t.call(this),this.from=e,this.to=r,this.slice=n,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&wt(t,this.from,this.to)?vt.fail("Structure replace would overwrite content"):vt.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new ct([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new e(r.pos,Math.max(r.pos,n.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var r=this.slice.size+t.slice.size==0?i.Slice.empty:new i.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,r,this.structure)}var n=this.slice.size+t.slice.size==0?i.Slice.empty:new i.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,i.Slice.fromJSON(t,r.slice),!!r.structure)},e}(mt);mt.jsonID("replace",gt);var yt=function(t){function e(e,r,n,o,i,a,s){t.call(this),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(wt(t,this.from,this.gapFrom)||wt(t,this.gapTo,this.to)))return vt.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return vt.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?vt.fromReplace(t,this.from,this.to,r):vt.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new ct([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return r.deleted&&n.deleted||o<r.pos||i>n.pos?null:new e(r.pos,n.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,i.Slice.fromJSON(t,r.slice),r.insert,!!r.structure)},e}(mt);function wt(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var a=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function bt(t,e,r){for(var n=[],o=0;o<t.childCount;o++){var a=t.child(o);a.content.size&&(a=a.copy(bt(a.content,e,a))),a.isInline&&(a=e(a,r,o)),n.push(a)}return i.Fragment.fromArray(n)}mt.jsonID("replaceAround",yt),ft.prototype.lift=function(t,e){for(var r=t.$from,n=t.$to,o=t.depth,a=r.before(o+1),s=n.after(o+1),c=a,p=s,u=i.Fragment.empty,f=0,l=o,h=!1;l>e;l--)h||r.index(l)>0?(h=!0,u=i.Fragment.from(r.node(l).copy(u)),f++):c--;for(var d=i.Fragment.empty,m=0,v=o,g=!1;v>e;v--)g||n.after(v+1)<n.end(v)?(g=!0,d=i.Fragment.from(n.node(v).copy(d)),m++):p++;return this.step(new yt(c,p,a,s,new i.Slice(u.append(d),f,m),u.size-f,!0))},ft.prototype.wrap=function(t,e){for(var r=i.Fragment.empty,n=e.length-1;n>=0;n--)r=i.Fragment.from(e[n].type.create(e[n].attrs,r));var o=t.start,a=t.end;return this.step(new yt(o,a,o,a,new i.Slice(r,0,0),e.length,!0))},ft.prototype.setBlockType=function(t,e,r,n){var o=this;if(void 0===e&&(e=t),!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(r,n)&&function(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}(o.doc,o.mapping.slice(a).map(e),r)){o.clearIncompatible(o.mapping.slice(a).map(e,1),r);var s=o.mapping.slice(a),c=s.map(e,1),p=s.map(e+t.nodeSize,1);return o.step(new yt(c,p,c+1,p-1,new i.Slice(i.Fragment.from(r.create(n,null,t.marks)),0,0),1,!0)),!1}})),this},ft.prototype.setNodeMarkup=function(t,e,r,n){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var a=e.create(r,null,n||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,a);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new yt(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new i.Slice(i.Fragment.from(a),0,0),1,!0))},ft.prototype.split=function(t,e,r){void 0===e&&(e=1);for(var n=this.doc.resolve(t),o=i.Fragment.empty,a=i.Fragment.empty,s=n.depth,c=n.depth-e,p=e-1;s>c;s--,p--){o=i.Fragment.from(n.node(s).copy(o));var u=r&&r[p];a=i.Fragment.from(u?u.type.create(u.attrs,a):n.node(s).copy(a))}return this.step(new gt(t,t,new i.Slice(o.append(a),e,e),!0))},ft.prototype.join=function(t,e){void 0===e&&(e=1);var r=new gt(t-e,t+e,i.Slice.empty,!0);return this.step(r)};var St=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),n=t.resolve(this.from),o=n.node(n.sharedDepth(this.to)),a=new i.Slice(bt(r.content,(function(t,r){return r.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),r.openStart,r.openEnd);return vt.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new kt(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(mt);mt.jsonID("addMark",St);var kt=function(t){function e(e,r,n){t.call(this),this.from=e,this.to=r,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,r=t.slice(this.from,this.to),n=new i.Slice(bt(r.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),r.openStart,r.openEnd);return vt.fromReplace(t,this.from,this.to,n)},e.prototype.invert=function(){return new St(this.from,this.to,this.mark)},e.prototype.map=function(t){var r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))},e}(mt);function Ct(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}mt.jsonID("removeMark",kt),ft.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,(function(n,c,p){if(n.isInline){var u=n.marks;if(!r.isInSet(u)&&p.type.allowsMarkType(r.type)){for(var f=Math.max(c,t),l=Math.min(c+n.nodeSize,e),h=r.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(h)||(a&&a.to==f&&a.mark.eq(u[d])?a.to=l:o.push(a=new kt(f,l,u[d])));s&&s.to==f?s.to=l:i.push(s=new St(f,l,r))}}})),o.forEach((function(t){return n.step(t)})),i.forEach((function(t){return n.step(t)})),this},ft.prototype.removeMark=function(t,e,r){var n=this;void 0===r&&(r=null);var o=[],a=0;return this.doc.nodesBetween(t,e,(function(n,s){if(n.isInline){a++;var c=null;if(r instanceof i.MarkType){var p=r.isInSet(n.marks);p&&(c=[p])}else r?r.isInSet(n.marks)&&(c=[r]):c=n.marks;if(c&&c.length)for(var u=Math.min(s+n.nodeSize,e),f=0;f<c.length;f++){for(var l=c[f],h=void 0,d=0;d<o.length;d++){var m=o[d];m.step==a-1&&l.eq(o[d].style)&&(h=m)}h?(h.to=u,h.step=a):o.push({style:l,from:Math.max(s,t),to:u,step:a})}}})),o.forEach((function(t){return n.step(new kt(t.from,t.to,t.style))})),this},ft.prototype.clearIncompatible=function(t,e,r){void 0===r&&(r=e.contentMatch);for(var n=this.doc.nodeAt(t),o=[],a=t+1,s=0;s<n.childCount;s++){var c=n.child(s),p=a+c.nodeSize,u=r.matchType(c.type,c.attrs);if(u){r=u;for(var f=0;f<c.marks.length;f++)e.allowsMarkType(c.marks[f].type)||this.step(new kt(a,p,c.marks[f]))}else o.push(new gt(a,p,i.Slice.empty));a=p}if(!r.validEnd){var l=r.fillBefore(i.Fragment.empty,!0);this.replace(a,a,new i.Slice(l,0,0))}for(var h=o.length-1;h>=0;h--)this.step(o[h]);return this},ft.prototype.replace=function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=i.Slice.empty);var n=function(t,e,r,n){if(void 0===r&&(r=e),void 0===n&&(n=i.Slice.empty),e==r&&!n.size)return null;var o=t.resolve(e),a=t.resolve(r);return Ct(o,a,n)?new gt(e,r,n):new xt(o,a,n).fit()}(this.doc,t,e,r);return n&&this.step(n),this},ft.prototype.replaceWith=function(t,e,r){return this.replace(t,e,new i.Slice(i.Fragment.from(r),0,0))},ft.prototype.delete=function(t,e){return this.replace(t,e,i.Slice.empty)},ft.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var xt=function(t,e,r){this.$to=e,this.$from=t,this.unplaced=r,this.frontier=[];for(var n=0;n<=t.depth;n++){var o=t.node(n);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(n))})}this.placed=i.Fragment.empty;for(var a=t.depth;a>0;a--)this.placed=i.Fragment.from(t.node(a).copy(this.placed))},Ot={depth:{configurable:!0}};function Mt(t,e,r){return 0==e?t.cutByIndex(r):t.replaceChild(0,t.firstChild.copy(Mt(t.firstChild.content,e-1,r)))}function Rt(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Rt(t.lastChild.content,e-1,r)))}function Et(t,e){for(var r=0;r<e;r++)t=t.firstChild.content;return t}function Tt(t,e,r){if(e<=0)return t;var n=t.content;return e>1&&(n=n.replaceChild(0,Tt(n.firstChild,e-1,1==n.childCount?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(i.Fragment.empty,!0)))),t.copy(n)}function _t(t,e,r,n,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!r.compatibleContent(i.type))return null;var s=n.fillBefore(i.content,!0,a);return s&&!function(t,e,r){for(var n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(r,i.content,a)?s:null}function At(t,e,r,n,o){if(e<r){var a=t.firstChild;t=t.replaceChild(0,a.copy(At(a.content,e+1,r,n,a)))}if(e>n){var s=o.contentMatchAt(0),c=s.fillBefore(t).append(t);t=c.append(s.matchFragment(c).fillBefore(i.Fragment.empty,!0))}return t}function Nt(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}Ot.depth.get=function(){return this.frontier.length-1},xt.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=e<0?this.$to:n.doc.resolve(e);if(this.close(o)){for(var a=this.placed,s=n.depth,c=o.depth;s&&c&&1==a.childCount;)a=a.firstChild.content,s--,c--;var p=new i.Slice(a,s,c);if(e>-1)return new yt(n.pos,e,this.$to.pos,this.$to.end(),p,r);if(p.size||n.pos!=this.$to.pos)return new gt(n.pos,o.pos,p)}return null},xt.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var r=void 0,n=(e?(r=Et(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var a=this.frontier[o],s=a.type,c=a.match,p=void 0,u=void 0;if(1==t&&(n?c.matchType(n.type)||(u=c.fillBefore(i.Fragment.from(n),!1)):s.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:o,parent:r,inject:u};if(2==t&&n&&(p=c.findWrapping(n.type)))return{sliceDepth:e,frontierDepth:o,parent:r,wrap:p};if(r&&c.matchType(r.type))break}},xt.prototype.openMore=function(){var t=this.unplaced,e=t.content,r=t.openStart,n=t.openEnd,o=Et(e,r);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new i.Slice(e,r+1,Math.max(n,o.size+r>=e.size-n?r+1:0)),!0)},xt.prototype.dropNode=function(){var t=this.unplaced,e=t.content,r=t.openStart,n=t.openEnd,o=Et(e,r);if(o.childCount<=1&&r>0){var a=e.size-r<=r+o.size;this.unplaced=new i.Slice(Mt(e,r-1,1),r-1,a?r-1:n)}else this.unplaced=new i.Slice(Mt(e,r,1),r,n)},xt.prototype.placeNodes=function(t){for(var e=t.sliceDepth,r=t.frontierDepth,n=t.parent,o=t.inject,a=t.wrap;this.depth>r;)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var c=this.unplaced,p=n?n.content:c.content,u=c.openStart-e,f=0,l=[],h=this.frontier[r],d=h.match,m=h.type;if(o){for(var v=0;v<o.childCount;v++)l.push(o.child(v));d=d.matchFragment(o)}for(var g=p.size+e-(c.content.size-c.openEnd);f<p.childCount;){var y=p.child(f),w=d.matchType(y.type);if(!w)break;(++f>1||0==u||y.content.size)&&(d=w,l.push(Tt(y.mark(m.allowedMarks(y.marks)),1==f?u:0,f==p.childCount?g:-1)))}var b=f==p.childCount;b||(g=-1),b&&g<0&&n&&n.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[r].match=d;for(var S=0,k=p;S<g;S++){var C=k.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),k=C.content}this.unplaced=b?0==e?i.Slice.empty:new i.Slice(Mt(c.content,e-1,1),e-1,g<0?c.openEnd:e-1):new i.Slice(Mt(c.content,e,f),c.openStart,c.openEnd),this.placed=Rt(this.placed,r,i.Fragment.from(l))},xt.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!_t(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var r=this.$to.depth,n=this.$to.after(r);r>1&&n==this.$to.end(--r);)++n;return n},xt.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var r=this.frontier[e],n=r.match,o=_t(t,e,r.type,n,!1);if(o){for(var i=e-1;i>=0;i--){var a=this.frontier[i],s=a.match,c=_t(t,i,a.type,s,!0);if(!c||c.childCount)continue t}return{depth:e,fit:o}}}},xt.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return!1;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Rt(this.placed,e.depth,e.fit));for(var r=e.depth+1;r<=t.depth;r++){var n=t.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,t.index(r));this.openFrontierNode(n.type,n.attrs,o)}return!0},xt.prototype.openFrontierNode=function(t,e,r){var n=this.frontier[this.depth];n.match=n.match.matchType(t),this.placed=Rt(this.placed,this.depth,i.Fragment.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})},xt.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(i.Fragment.empty,!0);t.childCount&&(this.placed=Rt(this.placed,this.frontier.length,t))},Object.defineProperties(xt.prototype,Ot),ft.prototype.replaceRange=function(t,e,r){if(!r.size)return this.deleteRange(t,e);var n=this.doc.resolve(t),o=this.doc.resolve(e);if(Ct(n,o,r))return this.step(new gt(t,e,r));var a=Nt(n,this.doc.resolve(e));0==a[a.length-1]&&a.pop();var s=-(n.depth+1);a.unshift(s);for(var c=n.depth,p=n.pos-1;c>0;c--,p--){var u=n.node(c).type.spec;if(u.defining||u.isolating)break;a.indexOf(c)>-1?s=c:n.before(c)==p&&a.splice(1,0,-c)}for(var f=a.indexOf(s),l=[],h=r.openStart,d=r.content,m=0;;m++){var v=d.firstChild;if(l.push(v),m==r.openStart)break;d=v.content}h>0&&l[h-1].type.spec.defining&&n.node(f).type!=l[h-1].type?h-=1:h>=2&&l[h-1].isTextblock&&l[h-2].type.spec.defining&&n.node(f).type!=l[h-2].type&&(h-=2);for(var g=r.openStart;g>=0;g--){var y=(g+h+1)%(r.openStart+1),w=l[y];if(w)for(var b=0;b<a.length;b++){var S=a[(b+f)%a.length],k=!0;S<0&&(k=!1,S=-S);var C=n.node(S-1),x=n.index(S-1);if(C.canReplaceWith(x,x,w.type,w.marks))return this.replace(n.before(S),k?o.after(S):e,new i.Slice(At(r.content,0,r.openStart,y),y,r.openEnd))}}for(var O=this.steps.length,M=a.length-1;M>=0&&(this.replace(t,e,r),!(this.steps.length>O));M--){var R=a[M];M<0||(t=n.before(R),e=o.after(R))}return this},ft.prototype.replaceRangeWith=function(t,e,r){if(!r.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var n=function(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var a=n.depth-1;a>=0;a--){var s=n.indexAfter(a);if(n.node(a).canReplaceWith(s,s,r))return n.after(a+1);if(s<n.node(a).childCount)return null}}(this.doc,t,r.type);null!=n&&(t=e=n)}return this.replaceRange(t,e,new i.Slice(i.Fragment.from(r),0,0))},ft.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=Nt(r,n),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||r.node(a).type.contentMatch.validEnd)return this.delete(r.start(a),n.end(a));if(a>0&&(s||r.node(a-1).canReplace(r.index(a-1),n.indexAfter(a-1))))return this.delete(r.before(a),n.after(a))}for(var c=1;c<=r.depth&&c<=n.depth;c++)if(t-r.start(c)==r.depth-c&&e>r.end(c)&&n.end(c)-e!=n.depth-c)return this.delete(r.before(c),e);return this.delete(t,e)};var jt={replace:1,replaceAround:2,removeMark:3,addMark:4},Ft={1:"replace",2:"replaceAround",3:"removeMark",4:"addMark"},Pt=function(){function t(e,r,n,o,i){h(this,t),this.id=e,this.data=r,this.time=n,this.steps=o,this.maps=i}return m(t,[{key:"serialize",value:function(){var t=this.id,e=this.data,r=this.time,n=this.steps,o=this.maps;return{id:t,data:e,time:r,steps:n.map((function(t){var e=t.toJSON(),r=e.stepType,n=e.from,o=e.to;return[jt[r],n,o]})),maps:o.map((function(t){return t.ranges}))}}}],[{key:"fromSerialized",value:function(e,r){var n=r.id,o=r.data,i=r.time,a=r.steps,s=r.maps;return new t(n,o,i,a.map((function(t){return mt.fromJSON(e.schema,{stepType:Ft[t[0]],from:t[1],to:t[2]})})),s.map((function(t){return new ct(t)})))}}]),t}(),zt=function t(e,r,n){h(this,t),this.from=e,this.to=r,this.commit=n},It=function(t,e,r){for(var n=[],o=e.maps[0].ranges,i=0;i<t.length;){var a=t[i],s=e.map(a.from,1),c=e.map(a.to,-1);s<o[0]&&c>o[0]?(n.push(new zt(s,o[0],a.commit)),n.push(new zt(o[0]+o[2],c,a.commit))):s<c&&n.push(new zt(s,c,a.commit)),i+=1}for(var p=function(t){var o=e.maps[t],i=e.slice(t+1);o.forEach((function(t,e,o,a){!function(t,e,r,n){var o=t,i=e,a=r;if(!(i>=a)){for(var s,c=0;c<o.length;c){if((s=o[c]).commit===n){if(s.to>e)break}else if(s.to>e){if(s.from<e){var p=new zt(s.from,e,s.commit);s.to>r?o.splice(c,0,p):o[c]=p,c+=1}break}c+=1}for(s=o[c];s;){if(s.commit===n){if(s.from>=a)break;i=Math.min(i,s.from),a=Math.min(a,s.to),o.splice(c,1)}else{if(s.from>=a)break;if(s.to>a){o[c]=new zt(a,s.to,n);break}o.splice(c,1)}s=o[c]}o.splice(c,0,new zt(i,a,n))}}(n,i.map(o,1),i.map(a,-1),r)})),u=t+=1},u=0;u<e.maps.length;)p(u);return n},Dt=function(t,e){if(t)for(var r=e.blameMap,n=0;n<r.length;n+=1)if(r[n].to>=t.head&&r[n].from<t.head&&void 0!==r[n].commit)return e.commits[r[n].commit]},Lt=function(){function t(e,r,n,o){var i=this;h(this,t),this.applyTransform=function(e){var r=e.steps.map((function(t,r){return t.invert(e.docs[r])}));return new t(function(t,e,r){var n=e.mapping;return It(t,n,r)}(i.blameMap,e,i.commits.length),i.commits,i.uncommittedSteps.concat(r),i.uncommittedMaps.concat(e.mapping.maps))},this.applyCommit=function(e,r,n){if(0!==i.uncommittedSteps.length){var o=new Pt(e,r,n,i.uncommittedSteps,i.uncommittedMaps);return i.commits.push(o),new t(i.blameMap,i.commits,[],[])}},this.blameMap=e,this.commits=r,this.uncommittedSteps=n,this.uncommittedMaps=o}return m(t,null,[{key:"create",value:function(e,r){if(!e||!e.length)return new t([new zt(0,r.doc.content.size,null)],[],[],[]);var n=e.map((function(t){return Pt.fromSerialized(r,t)}));return new t(function(t){for(var e=[],r=0;r<t.length;r+=1)e=It(e,new pt(t[r].maps),r);return e}(n),n,[],[])}}]),t}(),Bt=new o.PluginKey("track"),Ut=new o.Plugin({key:Bt,state:{init:function(t,e){return Lt.create(void 0,e)},apply:function(t,e,r,n){if(t.getMeta("track_license_missing"))return{license_missing:!0};if(e.license_missing)return e;var o=e;t.docChanged&&(o=o.applyTransform(t));var i=t.getMeta("set-commits");if(i)return Lt.create(i.commits,n);var a=t.getMeta("add-commit");return a&&(o=o.applyCommit(e.commits.length,a,new Date(t.time))),o}}}),qt=new o.PluginKey("highlightChanges"),Jt=new o.Plugin({key:qt,state:{init:function(){return{deco:a.DecorationSet.empty,commit:null}},apply:function(t,e,r,n){if(t.getMeta("track_license_missing"))return{license_missing:!0};if(e.license_missing)return e;var o,i=Bt.getState(r);if(t.getMeta("editor-clicked")){var s=n.selection;o=Dt(s,i)}else if(void 0!==t.getMeta("highlight-commit")){var c=i.commits,p=t.getMeta("highlight-commit");o=c.find((function(t){return t.id===p}))}if(o){var u=Bt.getState(r).blameMap.filter((function(t){return t.commit===o.id})).map((function(t){return a.Decoration.inline(t.from,t.to,{class:"nib-highlighted-commit-marker"})}));if(u)return{deco:a.DecorationSet.create(n.doc,u),commit:o}}return{deco:a.DecorationSet.empty,commit:null}}},props:{decorations:function(t){return this.getState(t).deco}}}),Ht=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t};function Wt(t){var e={};return function(r){return void 0===e[r]&&(e[r]=t(r)),e[r]}}var $t=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Vt=Wt((function(t){return $t.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));function Gt(t,e,r){var n="";return r.split(" ").forEach((function(r){void 0!==t[r]?e.push(t[r]):n+=r+" "})),n}var Xt=function(t,e,r){var n=t.key+"-"+e.name;if(!1===r&&void 0===t.registered[n]&&(t.registered[n]=e.styles),void 0===t.inserted[e.name]){var o=e;do{t.insert("."+n,o,t.sheet,!0),o=o.next}while(void 0!==o)}},Kt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Yt=/[A-Z]|^ms/g,Zt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Qt=function(t){return 45===t.charCodeAt(1)},te=function(t){return null!=t&&"boolean"!=typeof t},ee=Wt((function(t){return Qt(t)?t:t.replace(Yt,"-$&").toLowerCase()})),re=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(Zt,(function(t,e,r){return oe={name:e,styles:r,next:oe},e}))}return 1===Kt[t]||Qt(t)||"number"!=typeof e||0===e?e:e+"px"};function ne(t,e,r,n){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return oe={name:r.name,styles:r.styles,next:oe},r.name;if(void 0!==r.styles){var o=r.next;if(void 0!==o)for(;void 0!==o;)oe={name:o.name,styles:o.styles,next:oe},o=o.next;return r.styles+";"}return function(t,e,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=ne(t,e,r[o],!1);else for(var i in r){var a=r[i];if("object"!=typeof a)null!=e&&void 0!==e[a]?n+=i+"{"+e[a]+"}":te(a)&&(n+=ee(i)+":"+re(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=ne(t,e,a,!1);switch(i){case"animation":case"animationName":n+=ee(i)+":"+s+";";break;default:n+=i+"{"+s+"}"}}else for(var c=0;c<a.length;c++)te(a[c])&&(n+=ee(i)+":"+re(i,a[c])+";")}return n}(t,e,r);case"function":if(void 0!==t){var i=oe,a=r(t);return oe=i,ne(t,e,a,n)}break;case"string":}if(null==e)return r;var s=e[r];return void 0===s||n?r:s}var oe,ie=/label:\s*([^\s;\n{]+)\s*;/g,ae=function(t,e,r){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var n=!0,o="";oe=void 0;var i=t[0];null==i||void 0===i.raw?(n=!1,o+=ne(r,e,i,!1)):o+=i[0];for(var a=1;a<t.length;a++)o+=ne(r,e,t[a],46===o.charCodeAt(o.length-1)),n&&(o+=i[a]);ie.lastIndex=0;for(var s,c="";null!==(s=ie.exec(o));)c+="-"+s[1];return{name:function(t){for(var e,r=0,n=0,o=t.length;o>=4;++n,o-=4)e=1540483477*(65535&(e=255&t.charCodeAt(n)|(255&t.charCodeAt(++n))<<8|(255&t.charCodeAt(++n))<<16|(255&t.charCodeAt(++n))<<24))+(59797*(e>>>16)<<16),r=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&t.charCodeAt(n+2))<<16;case 2:r^=(255&t.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+c,styles:o,next:oe}},se=Vt,ce=function(t){return"theme"!==t&&"innerRef"!==t},pe=function(t){return"string"==typeof t&&t.charCodeAt(0)>96?se:ce};function ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(r,!0).forEach((function(e){Ht(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var le=function t(e,r){var n,o,i;void 0!==r&&(n=r.label,i=r.target,o=e.__emotion_forwardProp&&r.shouldForwardProp?function(t){return e.__emotion_forwardProp(t)&&r.shouldForwardProp(t)}:r.shouldForwardProp);var a=e.__emotion_real===e,c=a&&e.__emotion_base||e;"function"!=typeof o&&a&&(o=e.__emotion_forwardProp);var u=o||pe(c),f=!u("as");return function(){var l=arguments,h=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==n&&h.push("label:"+n+";"),null==l[0]||void 0===l[0].raw)h.push.apply(h,l);else{h.push(l[0][0]);for(var d=l.length,m=1;m<d;m++)h.push(l[m],l[0][m])}var v=p.withEmotionCache((function(t,e,r){return s.createElement(p.ThemeContext.Consumer,null,(function(n){var a=f&&t.as||c,p="",l=[],d=t;if(null==t.theme){for(var m in d={},t)d[m]=t[m];d.theme=n}"string"==typeof t.className?p=Gt(e.registered,l,t.className):null!=t.className&&(p=t.className+" ");var v=ae(h.concat(l),e.registered,d);Xt(e,v,"string"==typeof a),p+=e.key+"-"+v.name,void 0!==i&&(p+=" "+i);var g=f&&void 0===o?pe(a):u,y={};for(var w in t)f&&"as"===w||g(w)&&(y[w]=t[w]);return y.className=p,y.ref=r||t.innerRef,s.createElement(a,y)}))}));return v.displayName=void 0!==n?n:"Styled("+("string"==typeof c?c:c.displayName||c.name||"Component")+")",v.defaultProps=e.defaultProps,v.__emotion_real=v,v.__emotion_base=c,v.__emotion_styles=h,v.__emotion_forwardProp=o,Object.defineProperty(v,"toString",{value:function(){return"."+i}}),v.withComponent=function(e,n){return t(e,void 0!==n?fe({},r||{},{},n):r).apply(void 0,h)},v}},he=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(n,s.PureComponent);var e,r=(e=n,function(){var t,r=v(e);if(y()){var n=v(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return w(this,t)});function n(){return h(this,n),r.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this.props,e=t.editorWrapper,r=t.marker,n=t.pmstate,o=t.theme,i=n.pmview,a=qt.getState(i.state).commit;if(!a)return null;var s=a.data;return c.createElement(l.ThemeProvider,{theme:o},c.createElement(ve,{editorWrapper:e,marker:r,overlapToolbar:!0,render:function(){return c.createElement(me,null,s.username)}}))}}]),n}();he.propTypes={pmstate:u.object.isRequired,editorWrapper:u.object.isRequired,marker:u.object.isRequired,theme:u.object.isRequired};var de={name:"highlight_commit",getMarker:function(){var t=document.getElementsByClassName("nib-highlighted-commit-marker");return t[t.length-1]},condition:function(){return document.getElementsByClassName("nib-highlighted-commit-marker").length>0},component:function(t){return c.createElement(he,t)}},me=le("div",{target:"e1h4f94f0",label:"Wrapper"})("align-items:center;display:flex;",(function(t){var e=t.theme.constants;return{backgroundColor:e.color.backgroundHighlight.secondary,borderRadius:e.borderRadius,fontSize:e.fontSize.medium}}),""),ve=le(f.Popup,{target:"e1h4f94f1",label:"StyledPopup"})({border:"none",marginTop:-8},(function(t){return{backgroundColor:t.theme.constants.color.backgroundHighlight.secondary}}),""),ge=function(t){return function(e){var r=e.constants.color.backgroundHighlight.primary;return"\n  .nib-highlighted-commit-marker {\n    background-color: ".concat(t||r,";\n  }\n")}};t.exports=function t(e){var r=this;h(this,t),this.name="track",this.view=void 0,this.styles=ge,this.popups=[de],this.viewUpdateCallback=function(t){r.view=t},this.init=function(t){return function(t,e){t&&(0,t.dispatch)(t.state.tr.setMeta("set-commits",e))}(r.view,t)},this.doCommit=function(t){return function(t,e){t&&(0,t.dispatch)(t.state.tr.setMeta("add-commit",e))}(r.view,t)},this.highlightCommit=function(t){return function(t,e){t&&(0,t.dispatch)(t.state.tr.setMeta("highlight-commit",e))}(r.view,t)},this.resetHighlight=function(){var t;(t=r.view)&&(0,t.dispatch)(t.state.tr.setMeta("reset-highlight-commit",!0))},this.revertCommit=function(t,e){return function(t,e,r){if(!t)return{state:"FAILED"};var n=t.dispatch,o=t.state,i=Bt.getState(o),a=i.commits,s=i.uncommittedSteps,c=a.find((function(t){return t.id===e}));if(e<0)return{state:"FAILED",message:"INVALID_COMMIT"};if(s.length>0)return{state:"FAILED",message:"UNCOMMITTED_CHANGES"};for(var p=a.slice(e),u=new pt(p.reduce((function(t,e){return t.concat(e.maps)}),[])),f=o.tr,l=c.steps.length-1;l>=0;l-=1){var h=c.steps[l].map(u.slice(l+1));h&&f.maybeStep(h).doc&&u.appendMap(h.getMap(),l)}return f.docChanged&&n(f.setMeta("add-commit",r)),{state:"SUCCESS"}}(r.view,t,e)},this.getCommitAtSelection=function(){return e=(t=r.view.state).selection,n=Bt.getState(t),Dt(e,n);var t,e,n},this.getState=function(){return function(t){if(!t)return{commits:[],hasUncommittedSteps:!1,highlightedCommit:void 0};var e=t.state,r=Bt.getState(e);return r.license_missing?void 0:{commits:r.commits,hasUncommittedSteps:r.uncommittedSteps.length>0,highlightedCommit:qt.getState(t.state).commit}}(r.view)},this.getSerializableState=function(){return function(t){if(!t)return{commits:[]};var e=t.state,r=Bt.getState(e);return r.license_missing?void 0:{commits:r.commits.map((function(t){return t.serialize()}))}}(r.view)},this.updateLicenseInfo=function(t,e){nt.get("https://licencecheck.herokuapp.com/licenceCheck",{params:{licenseKey:e,plugins:["track"]}}).then((function(e){if("FAIL"===e.data.status){var n=r.view;(0,n.dispatch)(n.state.tr.setMeta("track_license_missing",!0));var o=document.createElement("span");o.style="\n            width: 100% !important;\n            background-color: rgba(213, 0, 0, 0.8) !important;\n            height: 30px !important;\n            position: absolute !important;\n            top: 0 !important;\n            margin-left: -4px !important;\n            color: white !important;\n            text-align: center;\n            font-size: 18px !important;\n            line-height: 1.5;\n          ",o.innerText="Please get license to use advance plugins !",t.appendChild(o)}}))},this.pmPlugins=[Ut,Jt],this.styles=ge(e)}}).call(this,r("8oxB"))}}]);